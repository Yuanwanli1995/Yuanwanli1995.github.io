<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"yuanwanli1995.github.io","root":"/","images":"/images","scheme":"Pisces","version":"8.7.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/./public/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>
<meta name="description" content="等不是办法，干才有出路">
<meta property="og:type" content="website">
<meta property="og:title" content="brisk">
<meta property="og:url" content="http://yuanwanli1995.github.io/index.html">
<meta property="og:site_name" content="brisk">
<meta property="og:description" content="等不是办法，干才有出路">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="yuanwanli">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://yuanwanli1995.github.io/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>brisk</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">brisk</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">welcome</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-overview">
            <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">yuanwanli</p>
  <div class="site-description" itemprop="description">等不是办法，干才有出路</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">77</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>



          </div>
        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://yuanwanli1995.github.io/2022/02/21/django%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="yuanwanli">
      <meta itemprop="description" content="等不是办法，干才有出路">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="brisk">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/02/21/django%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">django学习笔记</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-02-21 14:54:32 / 修改时间：14:54:31" itemprop="dateCreated datePublished" datetime="2022-02-21T14:54:32+08:00">2022-02-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>开始django</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># 安装特定版本的django </span><br><span class="line">pip install django==1.11.4 </span><br><span class="line"># 安装django会按照 django-admin命令行工具</span><br><span class="line"># 创建一个新的项目</span><br><span class="line">mkdir myproject </span><br><span class="line">cd myproject </span><br><span class="line">django-admin startproject myproject </span><br><span class="line"># 结构目录如下</span><br><span class="line">myproject/                  &lt;-- 高级别的文件夹</span><br><span class="line"> |-- myproject/             &lt;-- Django项目文件夹</span><br><span class="line"> |    |-- myproject/</span><br><span class="line"> |    |    |-- __init__.py</span><br><span class="line"> |    |    |-- settings.py</span><br><span class="line"> |    |    |-- urls.py</span><br><span class="line"> |    |    |-- wsgi.py</span><br><span class="line"> |    +-- manage.py</span><br></pre></td></tr></table></figure>

<p>最初的项目结构由五个文件组成：</p>
<ul>
<li><strong>manage.py</strong>：使用<strong>django-admin</strong>命令行工具的快捷方式。它用于运行与我们项目相关的管理命令。我们将使用它来运行开发服务器，运行测试，创建迁移等等。</li>
<li><strong>__init.py</strong>：这个空文件告诉python这个文件夹是一个python包。</li>
<li><strong>settings.py</strong>：这个文件包含了所有的项目配置。将来我们会一直提到这个文件！</li>
<li><strong>urls.py</strong>：这个文件负责映射我们项目中的路由和路径。例如，如果你想在访问URL <code>/ about/</code> 时显示某些内容，则必须先在这里做映射关系。</li>
<li><strong>wsgi.py</strong>：该文件是用于部署的简单网关接口。你可以暂且先不用关心她的内容，就先让他在那里就好了。</li>
</ul>
<p>django自带了一个简单的网络服务器。在开发过程中非常方便，所以我们无需安装任何其他软件即可在本地运行项目。我们可以通过执行命令来测试一下它：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py runserver </span><br></pre></td></tr></table></figure>

<p>访问web, <a href="http://localhost:8000即可看到。">http://localhost:8000即可看到。</a></p>
<p>在Django的哲学中，我们有两个重要的概念：</p>
<ul>
<li><strong>app</strong>：是一个可以做完成某件事情的Web应用程序。一个应用程序通常由一组<strong>models(数据库表)<strong>，</strong>views(视图)<strong>，</strong>templates(模板)<strong>，</strong>tests(测试)</strong> 组成。</li>
<li><strong>project</strong>：是配置和应用程序的集合。一个项目可以由多个应用程序或一个应用程序组成。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 在项目中新建一个应用</span><br><span class="line">django-admin startapp boards</span><br></pre></td></tr></table></figure>

<p>如何新建一个视图？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 在views中新建一个header page+response </span><br><span class="line">def home(request):</span><br><span class="line">    return HttpResponse(&quot;hello world&quot;)</span><br><span class="line"># 在urls中新建一个路由匹配规则， 正则</span><br><span class="line">from boards import views </span><br><span class="line">urlpatterns = [</span><br><span class="line">    url(r&#x27;^$&#x27;, views.home, name=&#x27;home&#x27;),</span><br><span class="line">]</span><br><span class="line"># ^$开始到结束，匹配空路径 </span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://yuanwanli1995.github.io/2022/02/21/2021-12-06-node.js-linux%E5%AE%89%E8%A3%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="yuanwanli">
      <meta itemprop="description" content="等不是办法，干才有出路">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="brisk">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/02/21/2021-12-06-node.js-linux%E5%AE%89%E8%A3%85/" class="post-title-link" itemprop="url">node.js linux安装</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-02-21 14:54:32 / 修改时间：14:54:31" itemprop="dateCreated datePublished" datetime="2022-02-21T14:54:32+08:00">2022-02-21</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h4 id="node-js-linux安装"><a href="#node-js-linux安装" class="headerlink" title="node.js linux安装"></a>node.js linux安装</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># 新建文件夹</span><br><span class="line">mkdir nodejs</span><br><span class="line">cd nodejs/</span><br><span class="line"># 下载官方编译好的node.js下载</span><br><span class="line">wget https://nodejs.org/dist/v12.14.0/node-v12.14.0-linux-x64.tar.xz</span><br><span class="line"># 解压</span><br><span class="line">xz -d node-v12.14.0-linux-x64.tar.xz </span><br><span class="line">tar -xf node-v12.14.0-linux-x64.tar </span><br><span class="line"># 移动文件夹</span><br><span class="line">mv node-v12.14.0-linux-x64/* /usr/local/nodejs/</span><br><span class="line"># 软链接</span><br><span class="line">ln -s /usr/local/nodejs/bin/node /usr/local/bin</span><br><span class="line">ln -s /usr/local/nodejs/bin/npm /usr/local/bin</span><br><span class="line"># 测试</span><br><span class="line">[root@monitor01 nodejs]# node -v </span><br><span class="line">v12.14.0</span><br></pre></td></tr></table></figure>

<p>记录备查</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://yuanwanli1995.github.io/2022/02/21/2021-12-03-%E9%83%A8%E7%BD%B2zabbix/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="yuanwanli">
      <meta itemprop="description" content="等不是办法，干才有出路">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="brisk">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/02/21/2021-12-03-%E9%83%A8%E7%BD%B2zabbix/" class="post-title-link" itemprop="url">部署zabbix</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-02-21 14:54:32 / 修改时间：14:54:31" itemprop="dateCreated datePublished" datetime="2022-02-21T14:54:32+08:00">2022-02-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%BC%96%E7%A8%8B%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">编程笔记</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Zabbix是当前主流开源的企业级分布式监控系统。Zabbix特点是：安装部署较简单，且默认自带了多种监控告警模板。也具备较强的仪表盘展示功能；提供API接口，支持脚本调用；支持自定义编写插件以及监控模板。 </p>
<p>这里记一下zabbix部署方法。 主要是以下几步。 </p>
<ol>
<li> 环境配置</li>
<li> yum安装 </li>
<li>mariadb配置zabbix表结构数据 </li>
<li> 配置zabbix  </li>
<li> 登陆zabbix web </li>
</ol>
<h3 id="1-基础配置"><a href="#1-基础配置" class="headerlink" title="1 基础配置"></a>1 基础配置</h3><p>确保zabbix可用， 测试的时候最好关闭firewalld、selinux  </p>
<h3 id="2-安装"><a href="#2-安装" class="headerlink" title="2 安装"></a>2 安装</h3><p>yum安装也很方便，只是先要添加yum源。 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm -Uvh https://repo.zabbix.com/zabbix/4.4/rhel/7/x86_64/zabbix-release-4.4-1.el7.noarch.rpm </span><br><span class="line">yum install epel-release </span><br></pre></td></tr></table></figure>

<blockquote>
<p>EPEL是由 Fedora 社区打造，为 RHEL 及衍生发行版如 CentOS、Scientific Linux 等提供高质量软件包的项目。装上了 EPEL之后，就相当于添加了一个第三方源。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install zabbix-* </span><br></pre></td></tr></table></figure>

<h3 id="3-数据库中导入zabbix表结构数据"><a href="#3-数据库中导入zabbix表结构数据" class="headerlink" title="3 数据库中导入zabbix表结构数据"></a>3 数据库中导入zabbix表结构数据</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 安装zabbix  </span><br><span class="line">yum -y install mariadb-* </span><br><span class="line"># 开机自启动给</span><br><span class="line">systemctl enable mariadb</span><br><span class="line"># 启动mariadb </span><br><span class="line">systemctl start mariadb  </span><br></pre></td></tr></table></figure>

<p>mariadb启动之后， 进入数据库，mariadb和mysql用法一样 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root </span><br></pre></td></tr></table></figure>

<p>配置 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create database zabbix character set utf8 collate utf8_bin;</span><br><span class="line">grant all privileges on zabbix.* to &#x27;zabbix&#x27;@&#x27;localhost&#x27; identified by &#x27;zabbix@123&#x27;;</span><br><span class="line">flush privileges;</span><br><span class="line">quit; </span><br></pre></td></tr></table></figure>

<blockquote>
<p>sql需要冒号结尾</p>
</blockquote>
<p>导入数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zcat /usr/share/doc/zabbix-server-mysql-*/create.sql.gz |mysql -uzabbix -p&#x27;zabbix@123&#x27; -b zabbix </span><br></pre></td></tr></table></figure>

<p>4 修改zabbix_server.conf配置 </p>
<p>先保存一份默认配置备用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp /etc/zabbix/zabbix_server.conf /etc/zabbix/zabbix_server.conf.source</span><br></pre></td></tr></table></figure>

<p>修改配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; /etc/zabbix/zabbix_server.conf &lt;&lt; EOF</span><br><span class="line">LogFile=/var/log/zabbix/zabbix_server.log</span><br><span class="line">LogFileSize=0</span><br><span class="line">DebugLevel=3</span><br><span class="line">PidFile=/var/run/zabbix/zabbix_server.pid</span><br><span class="line">SocketDir=/var/run/zabbix</span><br><span class="line">DBName=zabbix</span><br><span class="line">DBUser=zabbix</span><br><span class="line">DBPassword=zabbix@123</span><br><span class="line">StartPollers=16</span><br><span class="line">StartPollersUnreachable=4</span><br><span class="line">StartTrappers=10</span><br><span class="line">StartPingers=8</span><br><span class="line">SNMPTrapperFile=/var/log/snmptrap/snmptrap.log</span><br><span class="line">CacheSize=1024M</span><br><span class="line">StartDBSyncers=8</span><br><span class="line">HistoryCacheSize=1024M</span><br><span class="line">HistoryIndexCacheSize=256M</span><br><span class="line">TrendCacheSize=1024M</span><br><span class="line">Timeout=4</span><br><span class="line">AlertScriptsPath=/usr/lib/zabbix/alertscripts</span><br><span class="line">ExternalScripts=/usr/lib/zabbix/externalscripts</span><br><span class="line">LogSlowQueries=3000</span><br><span class="line">StatsAllowedIP=127.0.0.1 </span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<p>启动</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># systemctl enable zabbix-server</span><br><span class="line"># systemctl start zabbix-server </span><br></pre></td></tr></table></figure>

<p>配置nginx </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/nginx/conf.d/zabbix.conf  </span><br><span class="line"># 修改端口 和 server_name ,取消注释</span><br><span class="line">listen          8080;</span><br><span class="line">server_name     monitor.com; </span><br><span class="line"></span><br><span class="line"># 修改时区</span><br><span class="line">echo &quot;php_value[date.timezone] = Asia/Shanghai&quot; &gt;&gt;  /etc/php-fpm.d/zabbix.conf </span><br></pre></td></tr></table></figure>

<p>启动 php-fpm和nginx </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable php-fpm</span><br><span class="line">systemctl restart php-fpm</span><br><span class="line"></span><br><span class="line">systemctl enable nginx</span><br><span class="line">systemctl start nginx </span><br></pre></td></tr></table></figure>

<h3 id="访问登陆"><a href="#访问登陆" class="headerlink" title="访问登陆"></a>访问登陆</h3><p>最后访问 <a target="_blank" rel="noopener" href="http://ip:8080/">http://ip:8080</a> </p>
<p>按照提示登陆即可。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Yuanwanli1995/markdown_pic@main/blogpic/zabbix.png"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://yuanwanli1995.github.io/2022/02/21/2022-02-21-docker%E5%88%A0%E9%99%A4%E9%95%9C%E5%83%8F%E5%A4%B1%E8%B4%A5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="yuanwanli">
      <meta itemprop="description" content="等不是办法，干才有出路">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="brisk">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/02/21/2022-02-21-docker%E5%88%A0%E9%99%A4%E9%95%9C%E5%83%8F%E5%A4%B1%E8%B4%A5/" class="post-title-link" itemprop="url">docker删除镜像失败</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-02-21 00:00:00 / 修改时间：14:54:49" itemprop="dateCreated datePublished" datetime="2022-02-21T00:00:00+08:00">2022-02-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/k8s/" itemprop="url" rel="index"><span itemprop="name">k8s</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>docker删除镜像报错，一般来说有容器使用该镜像是不能直接删除的。先删除容器，再删除镜像。</p>
<p>Error response from daemon: conflict: unable to delete de529ffbdb66 (cannot be forced) - image has dependent child images</p>
<p>该镜像存在依赖它的子镜像，要先删除其依赖镜像。</p>
<p>[root@nginx ~]# docker rmi ee8623d6c15a<br>Error response from daemon: conflict: unable to delete ee8623d6c15a (must be forced) - image is referenced in multiple repositories</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@nginx ~]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">autoblog            v1                  ee8623d6c15a        3 days ago          1.12GB</span><br><span class="line">autoblog            v2                  ee8623d6c15a        3 days ago          1.12GB</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>两个仓库是同一个镜像，那么需要安装镜像：tag方式指定删除</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@nginx ~]# docker rmi autoblog:v1</span><br><span class="line">Untagged: autoblog:v1</span><br><span class="line">[root@nginx ~]# docker rmi autoblog:v2</span><br><span class="line">Untagged: autoblog:v2</span><br></pre></td></tr></table></figure>

<p>实际上docker images只能列出镜像，但docker image还可以做与其他的事情。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@nginx ~]# docker images --help</span><br><span class="line"></span><br><span class="line">Usage:  docker images [OPTIONS] [REPOSITORY[:TAG]]</span><br><span class="line"></span><br><span class="line">List images</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  -a, --all             Show all images (default hides intermediate images)</span><br><span class="line">      --digests         Show digests</span><br><span class="line">  -f, --filter filter   Filter output based on conditions provided</span><br><span class="line">      --format string   Pretty-print images using a Go template</span><br><span class="line">      --no-trunc        Don&#x27;t truncate output</span><br><span class="line">  -q, --quiet           Only show numeric IDs</span><br><span class="line">[root@nginx ~]# docker image</span><br><span class="line"></span><br><span class="line">Usage:  docker image COMMAND</span><br><span class="line"></span><br><span class="line">Manage images</span><br><span class="line"></span><br><span class="line">Commands:</span><br><span class="line">  build       Build an image from a Dockerfile</span><br><span class="line">  history     Show the history of an image</span><br><span class="line">  import      Import the contents from a tarball to create a filesystem image</span><br><span class="line">  inspect     Display detailed information on one or more images</span><br><span class="line">  load        Load an image from a tar archive or STDIN</span><br><span class="line">  ls          List images</span><br><span class="line">  prune       Remove unused images</span><br><span class="line">  pull        Pull an image or a repository from a registry</span><br><span class="line">  push        Push an image or a repository to a registry</span><br><span class="line">  rm          Remove one or more images</span><br><span class="line">  save        Save one or more images to a tar archive (streamed to STDOUT by default)</span><br><span class="line">  tag         Create a tag TARGET_IMAGE that refers to SOURCE_IMAGE</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">docker image prune 删除未被使用的镜像 </span><br><span class="line"># prune 修剪</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">docker rm -f container </span><br><span class="line"># 直接删除容器等于 </span><br><span class="line">docker stop container </span><br><span class="line">docker rm container </span><br><span class="line"></span><br><span class="line">docker container prune # 修整not runing的容器</span><br><span class="line">docker system prune</span><br><span class="line">#4种会被prune的对象以及其他信息，包括： </span><br><span class="line">stopped containers, 不是运行状态的container</span><br><span class="line">unused volumes，不被任何container引用的volume，所谓dangling volume，一般删除了某个container后，可能会产生这样的volume，可以通过docker rm -v避免这种dangling volume</span><br><span class="line">unused network，不被任何container引用的network</span><br><span class="line">dangling images，不被任何container引用的image</span><br><span class="line">每个被删除的对象都能看到它的ID，比如container ID、volume ID</span><br><span class="line">最后有个释放空间大小的summary</span><br></pre></td></tr></table></figure>








      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://yuanwanli1995.github.io/2022/02/21/2022-02-21-windows%E6%96%87%E6%A1%A3%E7%BC%96%E7%A0%81/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="yuanwanli">
      <meta itemprop="description" content="等不是办法，干才有出路">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="brisk">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/02/21/2022-02-21-windows%E6%96%87%E6%A1%A3%E7%BC%96%E7%A0%81/" class="post-title-link" itemprop="url">windows文档编码</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-02-21 00:00:00 / 修改时间：14:55:28" itemprop="dateCreated datePublished" datetime="2022-02-21T00:00:00+08:00">2022-02-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>win上面的文档上传到linux, 编码不对，结尾为^M. </p>
<p>(^M是ctrl+v,ctrl+m)</p>
<ol>
<li><p>如果是<strong>单个文档的话，可以用vi打开，执行 :%s/^M//g　来去掉^M,</strong></p>
</li>
<li><p>set ff=unix </p>
</li>
<li><pre><code>unix2dos  filename  
dos2unix  filename

</code></pre>
</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://yuanwanli1995.github.io/2022/02/18/2022-02-18-ansible%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="yuanwanli">
      <meta itemprop="description" content="等不是办法，干才有出路">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="brisk">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/02/18/2022-02-18-ansible%E4%BD%BF%E7%94%A8/" class="post-title-link" itemprop="url">ansible使用</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-02-18 00:00:00" itemprop="dateCreated datePublished" datetime="2022-02-18T00:00:00+08:00">2022-02-18</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2022-02-21 14:54:31" itemprop="dateModified" datetime="2022-02-21T14:54:31+08:00">2022-02-21</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="1-ansible是什么"><a href="#1-ansible是什么" class="headerlink" title="1 ansible是什么"></a>1 ansible是什么</h3><p>Ansilbe是一个部署一群远程s主机的工具。远程的主机可以是本地或者远程的虚拟机，也可以是远程的物理机。</p>
<h3 id="2-Ansible能做什么？"><a href="#2-Ansible能做什么？" class="headerlink" title="2 Ansible能做什么？"></a>2 Ansible能做什么？</h3><p>Ansilbe是一个部署一群远程主机的工具。远程的主机可以是本地或者远程的虚拟机，也可以是远程的物理机。</p>
<h3 id="3-ansible-配置"><a href="#3-ansible-配置" class="headerlink" title="3 ansible 配置"></a>3 ansible 配置</h3><ul>
<li>安装</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># Redhat/CentOS Linux上，Ansible目前放在的epel源中</span><br><span class="line"># Fedora默认源中包含ansible，直接安装包既可</span><br><span class="line">yum install epel-release </span><br><span class="line">yum install ansible -y</span><br></pre></td></tr></table></figure>

<ul>
<li>配置Ansible管理节点和主机的连接</li>
</ul>
<p>其实就是配置从<strong>管理节点到远程主机</strong>之间基于key（无密码的方式）的<strong>SSH连接</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 复制代码$ # 生成ssh key$ ssh-keygen$ </span><br><span class="line"># 拷贝ssh key到远程主机，ssh的时候就不需要输入密码了$ ssh-copy-id remoteuser@remoteserver$ # ssh的时候不会提示是否保存key$ ssh-keyscan remote_servers &gt;&gt; ~/.ssh/known_hosts</span><br></pre></td></tr></table></figure>






      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://yuanwanli1995.github.io/2022/02/18/2022-02-18-helm%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="yuanwanli">
      <meta itemprop="description" content="等不是办法，干才有出路">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="brisk">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/02/18/2022-02-18-helm%E4%BD%BF%E7%94%A8/" class="post-title-link" itemprop="url">helm使用</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-02-18 00:00:00" itemprop="dateCreated datePublished" datetime="2022-02-18T00:00:00+08:00">2022-02-18</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2022-02-21 14:54:31" itemprop="dateModified" datetime="2022-02-21T14:54:31+08:00">2022-02-21</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/k8s/" itemprop="url" rel="index"><span itemprop="name">k8s</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="1-1-为什么需要helm"><a href="#1-1-为什么需要helm" class="headerlink" title="1.1 为什么需要helm"></a>1.1 为什么需要helm</h3><p>在没使用helm之前，向<code>kubernetes</code>部署应用，我们要依次部署<code>deployment</code>,<code>service</code>,<code>configMap</code>等,步骤较繁琐。况且随着很多项目微服务化，复杂的应用在容器中部署以及管理显得较为复杂.</p>
<p><code>helm</code>通过打包的方式，支持发布的版本管理和控制,很大程度上简化了<code>Kubernetes</code>应用的部署和管理</p>
<h3 id="1-2-helm中几个概念"><a href="#1-2-helm中几个概念" class="headerlink" title="1.2 helm中几个概念"></a>1.2 helm中几个概念</h3><p><code>Helm</code>可以理解为<code>Kubernetes</code>的包管理工具，可以方便地发现、共享和使用为<code>Kubernetes</code>构建的应用，它包含几个基本概念</p>
<ul>
<li><strong>Chart</strong>: 一个Helm包，其中包含了运行一个应用所需要的镜像、依赖和资源定义等，还可能包含Kubernetes集群中的服务定义</li>
</ul>
<blockquote>
<p>可以理解为docker的image</p>
</blockquote>
<ul>
<li><strong>Release</strong>: 在<code>Kubernetes</code>集群上运行的 <code>Chart</code>的一个实例。在同一个集群上，一个 <code>Chart</code>可以安装很多次。每次安装都会创建一个新的<code>release</code></li>
</ul>
<blockquote>
<p>可以理解为docker的container实例</p>
</blockquote>
<ul>
<li><strong>Repository</strong>: 用于发布和存储 Chart 的仓库。</li>
</ul>
<h3 id="1-3-helm用途"><a href="#1-3-helm用途" class="headerlink" title="1.3 helm用途"></a>1.3 helm用途</h3><p>做为<code>Kubernetes</code>的一个包管理工具，Helm具有如下功能：</p>
<ul>
<li><p>创建新的<code>chart</code></p>
</li>
<li><p><code>chart</code>打包成<code>tgz</code>格式</p>
</li>
<li><p>上传chart到chart仓库或从仓库中下载 chart</p>
<ul>
<li>官方<code>chart</code>仓库是: <a target="_blank" rel="noopener" href="https://hub.helm.sh/">https://hub.helm.sh</a></li>
</ul>
</li>
<li><p>在<code>Kubernetes</code>集群中安装或卸载<code>chart</code></p>
</li>
<li><p>用<code>Helm</code>管理安装的<code>chart</code>的发布周期</p>
</li>
</ul>
<h3 id="1-4-helm安装"><a href="#1-4-helm安装" class="headerlink" title="1.4 helm安装"></a>1.4 helm安装</h3><ul>
<li>注意：这里安装的是<code>helm v3.2.4</code>，如需下载更新的版本，可以至github官方repo选择</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/helm/helm/tags</span><br></pre></td></tr></table></figure>

<h3 id="2-安装"><a href="#2-安装" class="headerlink" title="2 安装"></a>2 安装</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 如无需更换版本，直接执行下载</span><br><span class="line">wget https://get.helm.sh/helm-v3.2.4-linux-amd64.tar.gz</span><br><span class="line"></span><br><span class="line"># 解压</span><br><span class="line">tar -zxvf helm-v3.2.4-linux-amd64.tar.gz</span><br><span class="line"></span><br><span class="line"># 进入到解压后的目录</span><br><span class="line">cd linux-amd64/</span><br><span class="line"></span><br><span class="line"># 赋予权限</span><br><span class="line">chmod a+x /usr/local/bin/helm</span><br><span class="line"></span><br><span class="line"># 查看版本</span><br><span class="line">helm version</span><br></pre></td></tr></table></figure>

<h3 id="3-1-chart"><a href="#3-1-chart" class="headerlink" title="3.1 chart"></a>3.1 chart</h3><p>可以直接使用官方的chart仓库或者其他仓库来安装一些<code>chart</code></p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://hub.helm.sh/">https://hub.helm.sh</a></p>
</blockquote>
<ul>
<li>下面以官方仓库的一个redis为例</li>
</ul>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://hub.helm.sh/charts/choerodon/redis">https://hub.helm.sh/charts/choerodon/redis</a></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 添加仓库</span><br><span class="line">helm repo add choerodon https://openchart.choerodon.com.cn/choerodon/c7n</span><br><span class="line"></span><br><span class="line"># 安装</span><br><span class="line">helm install choerodon/redis --version 0.2.5</span><br></pre></td></tr></table></figure>

<h3 id="3-2-自定义chart"><a href="#3-2-自定义chart" class="headerlink" title="3.2 自定义chart"></a>3.2 自定义chart</h3><p>文件目录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── Chart.yaml</span><br><span class="line">├── templates</span><br><span class="line">|   ├── deployment.yaml</span><br><span class="line">|   └── service.yaml</span><br><span class="line">├── values.yaml</span><br></pre></td></tr></table></figure>

<p>一个基本的自定义chart的文件目录结构大概是如上：</p>
<ul>
<li><p><strong>Chart.yaml</strong>: 定义当前<code>chart</code>的基本metadata, 比如name，tag啥的</p>
</li>
<li><p>templates</p>
<p>: 这个文件夹下放当前chart需要的一些yaml资源清单</p>
<ul>
<li>资源清单支持<code>变量模版语法</code></li>
</ul>
</li>
<li><p><strong>values.yaml</strong>: 定义变量，可被<code>template</code>下的yaml资源清单使用</p>
</li>
</ul>
<h3 id="3-3-helm使用"><a href="#3-3-helm使用" class="headerlink" title="3.3 helm使用"></a>3.3 helm使用</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">[root@node229 linux-amd64]# helm --help</span><br><span class="line">The Kubernetes package manager</span><br><span class="line"></span><br><span class="line">Common actions for Helm:</span><br><span class="line"></span><br><span class="line">- helm search:    search for charts # 搜索公开仓库的charts </span><br><span class="line">- helm pull:      download a chart to your local directory to view # 下载charts</span><br><span class="line">- helm install:   upload the chart to Kubernetes # 安装charts </span><br><span class="line">- helm list:      list releases of charts # 查看Charts 下面对于的releases </span><br><span class="line"></span><br><span class="line">Environment variables: # 环境变量</span><br><span class="line"></span><br><span class="line">| Name                               | Description                                                                       |</span><br><span class="line">|------------------------------------|-----------------------------------------------------------------------------------|</span><br><span class="line">| $XDG_CACHE_HOME                    | set an alternative location for storing cached files.                             |</span><br><span class="line">| $XDG_CONFIG_HOME                   | set an alternative location for storing Helm configuration.                       |</span><br><span class="line">| $XDG_DATA_HOME                     | set an alternative location for storing Helm data.                                |</span><br><span class="line">| $HELM_DRIVER                       | set the backend storage driver. Values are: configmap, secret, memory, postgres   |</span><br><span class="line">| $HELM_DRIVER_SQL_CONNECTION_STRING | set the connection string the SQL storage driver should use.                      |</span><br><span class="line">| $HELM_NO_PLUGINS                   | disable plugins. Set HELM_NO_PLUGINS=1 to disable plugins.                        |</span><br><span class="line">| $KUBECONFIG                        | set an alternative Kubernetes configuration file (default &quot;~/.kube/config&quot;)       |</span><br><span class="line"></span><br><span class="line">Helm stores configuration based on the XDG base directory specification, so</span><br><span class="line"></span><br><span class="line">- cached files are stored in $XDG_CACHE_HOME/helm</span><br><span class="line">- configuration is stored in $XDG_CONFIG_HOME/helm</span><br><span class="line">- data is stored in $XDG_DATA_HOME/helm</span><br><span class="line"></span><br><span class="line">By default, the default directories depend on the Operating System. The defaults are listed below:</span><br><span class="line"></span><br><span class="line">| Operating System | Cache Path                | Configuration Path             | Data Path               |</span><br><span class="line">|------------------|---------------------------|--------------------------------|-------------------------|</span><br><span class="line">| Linux            | $HOME/.cache/helm         | $HOME/.config/helm             | $HOME/.local/share/helm |</span><br><span class="line">| macOS            | $HOME/Library/Caches/helm | $HOME/Library/Preferences/helm | $HOME/Library/helm      |</span><br><span class="line">| Windows          | %TEMP%\helm               | %APPDATA%\helm                 | %APPDATA%\helm          |</span><br><span class="line"></span><br><span class="line">Usage:</span><br><span class="line">  helm [command]</span><br><span class="line"></span><br><span class="line">Available Commands:</span><br><span class="line">  completion  generate autocompletions script for the specified shell (bash or zsh)#为指定的shell生成自动完成脚本</span><br><span class="line">  create      create a new chart with the given name # 用给定的名称创建一个新的chart </span><br><span class="line">  dependency  manage a chart&#x27;s dependencies # 管理chart的依赖关系</span><br><span class="line">  env         helm client environment information # 掌握client环境</span><br><span class="line">  get         download extended information of a named release # 下载指定版本的扩展信息</span><br><span class="line">  help        Help about any command # </span><br><span class="line">  history     fetch release history # 获取版本历史</span><br><span class="line">  install     install a chart # 装一个chart</span><br><span class="line">  lint        examine a chart for possible issues # ：检查chart中可能出现的问题</span><br><span class="line">  list        list releases # list</span><br><span class="line">  package     package a chart directory into a chart archive # 将chart目录打包到chart存档文件中</span><br><span class="line">  plugin      install, list, or uninstall Helm plugins # 安装，列表，或卸载Helm插件</span><br><span class="line">  pull        download a chart from a repository and (optionally) unpack it in local directory # 从存储库下载chart，并(可选地)将其解压缩到本地目录中</span><br><span class="line">  repo        add, list, remove, update, and index chart repositories # 添加、列出、删除、更新和索引chart存储库</span><br><span class="line">  rollback    roll back a release to a previous revision # 将一个版本回滚到以前的版本</span><br><span class="line">  search      search for a keyword in charts # 在chart中搜索关键字</span><br><span class="line">  show        show information of a chart # 显示chart的信息</span><br><span class="line">  status      display the status of the named release # 显示指定版本的状态</span><br><span class="line">  template    locally render templates # 本地呈现模板</span><br><span class="line">  test        run tests for a release # 为发行版运行测试</span><br><span class="line">  uninstall   uninstall a release # 卸载一个release</span><br><span class="line">  upgrade     upgrade a release # 升级一个release</span><br><span class="line">  verify      verify that a chart at the given path has been signed and is valid # 验证给定路径上的chart已签名并有效</span><br><span class="line">  version     print the client version information # 打印client版本信息</span><br><span class="line"></span><br><span class="line">Flags:</span><br><span class="line">      --add-dir-header                   If true, adds the file directory to the header # 如果为true，则将文件目录添加到头文件中</span><br><span class="line">      --alsologtostderr                  log to standard error as well as files # 记录标准错误和文件</span><br><span class="line">      --debug                            enable verbose output # 启用详细输出</span><br><span class="line">  -h, --help                             help for helm</span><br><span class="line">      --kube-apiserver string            the address and the port for the Kubernetes API server# Kubernetes API服务器的地址和端口</span><br><span class="line">      --kube-context string              name of the kubeconfig context to use#要使用的kubecconfig上下文的名称</span><br><span class="line">      --kube-token string                bearer token used for authentication #用于认证的承载令牌</span><br><span class="line">      --kubeconfig string                path to the kubeconfig file#kubecconfig文件的路径</span><br><span class="line">      --log-backtrace-at traceLocation   when logging hits line file:N, emit a stack trace (default :0)#当日志命中行文件:N时，发出一个堆栈跟踪(默认值:0)</span><br><span class="line">      --log-dir string                   If non-empty, write log files in this directory#如果不为空，则将日志文件写入该目录</span><br><span class="line">      --log-file string                  If non-empty, use this log file#如果非空，使用此日志文件</span><br><span class="line">      --log-file-max-size uint           Defines the maximum size a log file can grow to. Unit is megabytes. If the value is 0, the maximum file size is unlimited. (default 1800)#定义日志文件可以增长到的最大大小。单位是字节。当取值为0时，表示不限制文件的最大大小。1800(默认)</span><br><span class="line">      --logtostderr                      log to standard error instead of files (default true)#将日志记录到标准错误而不是文件(默认为true)</span><br><span class="line">  -n, --namespace string                 namespace scope for this request#此请求的名称空间范围</span><br><span class="line">      --registry-config string           path to the registry config file (default &quot;/root/.config/helm/registry.json&quot;)#注册表配置文件的路径(默认&quot;/root/.config/helm/registry.json&quot;)</span><br><span class="line">      --repository-cache string          path to the file containing cached repository indexes (default &quot;/root/.cache/helm/repository&quot;)#包含缓存存储库索引的文件路径(默认为&quot;/root/.cache/helm/repository&quot;)</span><br><span class="line">      --repository-config string         path to the file containing repository names and URLs (default &quot;/root/.config/helm/repositories.yaml&quot;)#包含存储库名称和url的文件路径(默认为&quot;/root/.config/helm/repositories.yaml&quot;)</span><br><span class="line">      --skip-headers                     If true, avoid header prefixes in the log messages#如果为true，则避免在日志消息中使用头前缀</span><br><span class="line">      --skip-log-headers                 If true, avoid headers when opening log files#如果为true，则在打开日志文件时避免使用头文件</span><br><span class="line">      --stderrthreshold severity         logs at or above this threshold go to stderr (default 2)</span><br><span class="line">  -v, --v Level                          number for the log level verbosity#超过这个阈值的日志将转到stderr(默认2)</span><br><span class="line">      --vmodule moduleSpec               comma-separated list of pattern=N settings for file-filtered logging#以逗号分隔的模式列表=N个文件过滤日志设置</span><br><span class="line"></span><br><span class="line">Use &quot;helm [command] --help&quot; for more information about a command.</span><br><span class="line"></span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://yuanwanli1995.github.io/2022/02/18/2022-02-18-dockerfile%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="yuanwanli">
      <meta itemprop="description" content="等不是办法，干才有出路">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="brisk">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/02/18/2022-02-18-dockerfile%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/" class="post-title-link" itemprop="url">dockerfile使用</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-02-18 00:00:00" itemprop="dateCreated datePublished" datetime="2022-02-18T00:00:00+08:00">2022-02-18</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2022-02-21 14:56:11" itemprop="dateModified" datetime="2022-02-21T14:56:11+08:00">2022-02-21</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/k8s/" itemprop="url" rel="index"><span itemprop="name">k8s</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="dockerfile使用方法"><a href="#dockerfile使用方法" class="headerlink" title="dockerfile使用方法"></a>dockerfile使用方法</h3><p>构建镜像的方式有两种：一种是基于容器制作，另一种就是通过Dockerfile。Dockerfile其实就是我们用来构建Docker镜像的源码，当然这不是所谓的编程源码，而是一些命令的组合，只要理解它的逻辑和语法格式，就可以编写Dockerfile了。</p>
<p>简要概括Dockerfile的作用：它可以让用户个性化定制Docker镜像。因为工作环境中的需求各式各样，网络上的镜像很难满足实际的需求。</p>
<h3 id="Dockerfile-Format"><a href="#Dockerfile-Format" class="headerlink" title="Dockerfile Format"></a>Dockerfile Format</h3><ol>
<li>Dockerfile整体就两类语句组成：<ul>
<li># Comment 注释信息</li>
<li>Instruction arguments 指令 参数，一行一个指令。</li>
</ul>
</li>
<li>Dockerfile文件名首字母必须大写。</li>
<li>Dockerfile指令不区分大小写，但是为方便和参数做区分，通常指令使用大写字母。</li>
<li>Dockerfile中指令按顺序从上至下依次执行。</li>
<li>Dockerfile中第一个非注释行必须是FROM指令，用来指定制作当前镜像依据的是哪个基础镜像。</li>
<li>Dockerfile中需要调用的文件必须跟Dockerfile文件在同一目录下，或者在其子目录下，父目录或者其它路径无效。</li>
</ol>
<h2 id="三、Dockerfile-Instructions"><a href="#三、Dockerfile-Instructions" class="headerlink" title="三、Dockerfile Instructions"></a>三、Dockerfile Instructions</h2><h4 id="FROM"><a href="#FROM" class="headerlink" title="FROM"></a>FROM</h4><ul>
<li>Introduction<ul>
<li>FROM指令必须为Dockerfile文件开篇的第一个非注释行，用于指定构建镜像所使用的基础镜像，后续的指令运行都要依靠此基础镜像所提供的的环境（简单说就是假如Dockerfile中所引用的基础镜像里面没有mkdir命令，那后续的指令是没法使用mkdir参数的。）</li>
<li>实际使用中，如果没有指定仓库，docker build会先从本机查找是否有此基础镜像，如果没有会默认去Docker Hub Registry上拉取，再找不到就会报错。</li>
</ul>
</li>
<li>Syntax<ul>
<li>FROM <Repository>[:<Tag>]</li>
<li>FROM <Repository>@<Digest><ul>
<li>Digest：镜像的哈希码，防止镜像被冒名顶替。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="MAINTAINER（deprecated）"><a href="#MAINTAINER（deprecated）" class="headerlink" title="MAINTAINER（deprecated）"></a>MAINTAINER（deprecated）</h4><ul>
<li>Introduction<ul>
<li>用于让Dockerfile的作者提供个人的信息</li>
<li>Dockerfile并不限制MAINTAINER指令的位置，但是建议放在FROM指令之后</li>
<li>在较新的docker版本中，已经被LABEL替代。</li>
</ul>
</li>
<li>Syntax<ul>
<li>MAINTAINER “<a href="mailto:&#109;&#101;&#x72;&#x6c;&#x65;&#x40;&#x65;&#120;&#x61;&#x6d;&#112;&#108;&#101;&#x2e;&#x63;&#111;&#109;">&#109;&#101;&#x72;&#x6c;&#x65;&#x40;&#x65;&#120;&#x61;&#x6d;&#112;&#108;&#101;&#x2e;&#x63;&#111;&#109;</a>“</li>
</ul>
</li>
</ul>
<h4 id="LABEL"><a href="#LABEL" class="headerlink" title="LABEL"></a>LABEL</h4><ul>
<li>Introduction<ul>
<li>同docker run -l</li>
<li>让用户为镜像指定各种元数据（键值对的格式）。</li>
</ul>
</li>
<li>Syntax<ul>
<li>LABEL <key>=<value> <key>=<value></li>
</ul>
</li>
</ul>
<h4 id="COPY"><a href="#COPY" class="headerlink" title="COPY"></a>COPY</h4><ul>
<li>Introduction<ul>
<li>复制宿主机上的文件到目标镜像中</li>
</ul>
</li>
<li>Syntax<ul>
<li>COPY <src>… <dest></li>
<li>COPY [“<src>“,… “<dest>“]<ul>
<li><src>：要复制的源文件或者目录，支持通配符</li>
<li><dest>：目标路径，即正创建的镜像的文件系统路径，建议使用绝对路径，否则，COPY指令会以WORKDIR为其起始路径。</li>
<li>如果路径中如果包含空白字符，建议使用第二种格式用引号引起来，否则会被当成两个文件。</li>
</ul>
</li>
</ul>
</li>
<li>Rules<ul>
<li><src>必须是build上下文中的目录，不能是其父目录中的文件。</li>
<li>如果<src>是目录，则其内部的文件或则子目录会被递归复制，但<src>目录本身不会被复制。</li>
<li>如果指定了多个<src>，或者<src>中使用通配符，则<dest>必须是一个目录，且必须以 / 结尾。</li>
<li>如果<dest>事先不存在，它将会被自动创建，包括其父目录路径。</li>
</ul>
</li>
</ul>
<h4 id="ADD"><a href="#ADD" class="headerlink" title="ADD"></a>ADD</h4><ul>
<li>Introduction<ul>
<li>ADD指令跟COPY类似，不过它还支持使用tar文件和URL路径。<ul>
<li>当拷贝的源文件是tar文件时，会自动展开为一个目录并拷贝进新的镜像中；然而通过URL获取到的tar文件不会自动展开。</li>
<li>主机可以联网的情况下，docker build可以将网络上的某文件引用下载并打包到新的镜像中。</li>
</ul>
</li>
</ul>
</li>
<li>Syntax<ul>
<li>ADD <src>… <dest></li>
<li>ADD [“<src>“,… “<dest>“]</li>
</ul>
</li>
</ul>
<h4 id="WORKDIR"><a href="#WORKDIR" class="headerlink" title="WORKDIR"></a>WORKDIR</h4><ul>
<li>Introduction<ul>
<li>同docker run -w</li>
<li>指定工作目录，可以指多个，每个WORKDIR只影响他下面的指令，直到遇见下一个WORKDIR为止。</li>
<li>WORKDIR也可以调用由ENV指令定义的变量。</li>
</ul>
</li>
<li>Syntax<ul>
<li>WORKDIR 相对路径或者绝对路径<ul>
<li>相对路径是相对于上一个WORKDIR指令的路径，如果上面没有WORKDIR指令，那就是当前Dockerfile文件的目录。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="VOLUME"><a href="#VOLUME" class="headerlink" title="VOLUME"></a>VOLUME</h4><ul>
<li>Introduction<ul>
<li>docker run -v简化版</li>
<li>用于在镜像中创建一个挂载点目录。上一章中有提到Volume有两种类型：绑定挂载卷和docker管理的卷。在dockerfile中只支持docker管理的卷，也就是说只能指定容器内的路径，不能指定宿主机的路径。</li>
</ul>
</li>
<li>Syntax<ul>
<li>VOLUME <mountpoint></li>
<li>VOLUME [“<mountpoint>“]</li>
</ul>
</li>
</ul>
<h4 id="EXPOSE"><a href="#EXPOSE" class="headerlink" title="EXPOSE"></a>EXPOSE</h4><ul>
<li>Introduction<ul>
<li>同docker run –expose</li>
<li>指定容器中待暴露的端口。比如容器提供的是一个https服务且需要对外提供访问，那就需要指定待暴露443端口，然后在使用此镜像启动容器时搭配 -P 的参数才能将待暴露的状态转换为真正暴露的状态，转换的同时443也会转换成一个随机端口，跟 -p :443一个意思。</li>
<li>EXPOSE指令可以一次指定多个端口，例如：EXPOSE 11111/udp 11112/tcp</li>
</ul>
</li>
<li>Syntax<ul>
<li>EXPOSE <port>[/<protocol>] [<port>[/<protocol>] …]</li>
<li><protocol>用于指定协议类型，如果不指定，默认TCP协议。</li>
</ul>
</li>
</ul>
<h4 id="ENV"><a href="#ENV" class="headerlink" title="ENV"></a>ENV</h4><ul>
<li>Introduction<ul>
<li>同docker run -e</li>
<li>为镜像定义所需的环境变量，并可被ENV指令后面的其它指令所调用。调用格式为$variable_name或者${variable_name}</li>
<li>使用docker run启动容器的时候加上 -e 的参数为variable_name赋值，可以覆盖Dockerfile中ENV指令指定的此variable_name的值。但是不会影响到dockerfile中已经引用过此变量的文件名。下面有举例说明：</li>
</ul>
</li>
<li>Syntax<ul>
<li>ENV <key> <value></li>
<li>ENV <key>=<value> …<ul>
<li>第一种格式一次只能定义一个变量，<key>之后所有内容都会被视为<value>的组成部分</li>
<li>第二种格式一次可以定义多个变量，每个变量为一个”=”的键值对，如果<value>中包含空格，可以用反斜线 \ 进行转义，也可以为<value>加引号，另外参数过长时可用反斜线做续行。</li>
<li>定义多个变量时，建议使用第二种方式，因为Dockerfile中每一行都是一个镜像层，构建起来比较吃资源。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="RUN"><a href="#RUN" class="headerlink" title="RUN"></a>RUN</h4><ul>
<li>Introduction<ul>
<li>用于指定docker build过程中运行的程序，可以是任何命令。</li>
<li>RUN指令后所执行的命令必须在FROM指令后的基础镜像中存在才行。</li>
</ul>
</li>
<li>Syntax<ul>
<li>RUN <command></li>
<li>RUN [“executable”, “param1”, “param2”]<ul>
<li><command>通常是一个shell命令，系统默认会把后面的命令作为shell的子进程来运行，以”/bin/sh -c”来运行它，也就意味着此进程在容器中的PID一定不为1，如果是1完事就结束了哇。</li>
<li>第二种格式的参数是一个JSON格式的数组，其中”executable”为要运行的命令，后面的”paramN”为传递给命令的选项或参数。此格式指定的命令不会以”/bin/sh -c”来发起，也就是直接由内核创建，因此不具备shell特性，类似于RUN [ “echo”, “$HOME” ]，是无法识别 $ 的；如果想要依赖shell特性，可以替换命令为这样的格式[ “/bin/sh”, “-c”, “echo $HOME” ]。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="CMD"><a href="#CMD" class="headerlink" title="CMD"></a>CMD</h4><ul>
<li>Introduction<ul>
<li>指定启动容器的默认要运行的程序，也就是PID为1的进程命令，且其运行结束后容器也会终止。如果不指定，默认是bash。</li>
<li>CMD指令指定的默认程序会被docker run命令行指定的参数所覆盖。</li>
<li>Dockerfile中可以存在多个CMD指令，但仅最后一个生效。因为一个docker容器只能运行一个PID为1的进程。</li>
<li>类似于RUN指令，也可以运行任意命令或程序，但是两者的运行时间点不同<ul>
<li>RUN指令运行在docker build的过程中，而CMD指令运行在基于新镜像启动容器（docker run）时。</li>
</ul>
</li>
</ul>
</li>
<li>Syntax<ul>
<li>CMD command param1 param2</li>
<li>CMD [“executable”,”param1”,”param2”]</li>
<li>CMD [“param1”,”param2”]<ul>
<li>前两种语法格式同RUN指令。第一种用法对于CMD指令基本没有意义，因为它运行的程序PID不为1。</li>
<li>第三种则需要结合ENTRYPOINT指令使用，CMD指令后面的命令作为ENTRYPOINT指令的默认参数。如果docker run命令行结尾有参数指定，那CMD后面的参数不生效。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="ENTRYPOINT"><a href="#ENTRYPOINT" class="headerlink" title="ENTRYPOINT"></a>ENTRYPOINT</h4><ul>
<li>Introduction<ul>
<li>类似CMD指令的功能，用于为容器指定默认运行程序。</li>
<li>Dockerfile中可以存在多个ENTRYPOINT指令，但仅最后一个生效</li>
<li>与CMD区别在于，由ENTRYPOINT启动的程序不会被docker run命令行指定的参数所覆盖，而且这些命令行参数会被当做参数传递给ENTRYPOINT指令指定的程序。</li>
<li>不过，docker run的–entrypoint选项的参数可覆盖ENTRYPOINT指定的默认程序。示例如下：</li>
</ul>
</li>
<li>Syntax<ul>
<li>ENTRYPOINT command param1 param2</li>
<li>ENTRYPOINT [“executable”, “param1”, “param2”]</li>
</ul>
</li>
</ul>
<h4 id="USER"><a href="#USER" class="headerlink" title="USER"></a>USER</h4><ul>
<li>Introduction<ul>
<li>用于指定docker build过程中任何RUN、CMD等指令的用户名或者UID。</li>
<li>默认情况下容器的运行用户为root。</li>
</ul>
</li>
<li>Syntax<ul>
<li>USER <user>[:<group>]</li>
<li>USER <UID>[:<GID>]<ul>
<li>实践中UID需要是/etc/passwd中某用户的有效UID，否则docker run命令将运行失败。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="HEALTHCHECK"><a href="#HEALTHCHECK" class="headerlink" title="HEALTHCHECK"></a>HEALTHCHECK</h4><ul>
<li>Introduction<ul>
<li>顾名思义，健康检查。此指令的就是告诉docker如果检查容器是否正常工作。拿nginx举例，即便进程运行，服务也不一定正常，因为万一root指错了呢？</li>
</ul>
</li>
<li>Syntax<ul>
<li>HEALTHCHECK [OPTIONS] CMD command</li>
<li>HEALTHCHECK NONE<ul>
<li>HEALTHCHECK指令让我们去定义一个CMD，在CMD后面编写一条命令去判断我们的服务运行是否正常。检查肯定不是一次性的，所以OPTIONS就是指定检查的频率等等。<ul>
<li>–interval=DURATION（默认值：30s）：每隔多久检查一次，默认30s</li>
<li>–timeout=DURATION（默认值：30s）：超时时长，默认30s</li>
<li>–start-period=DURATION（默认值：0s）：启动健康检查的等待时间。因为容器启动成功时，进程不一定立马就启动成功，那过早开始检查就会返回不健康。</li>
<li>–retries=N（默认值：3）：如果检查一次失败就返回不健康未免太武断，所以默认三次机会。</li>
<li>CMD健康检测命令发出时，返回值有三种情况<ul>
<li>0：成功</li>
<li>1：不健康</li>
<li>2：保留，无实际意义。</li>
</ul>
</li>
</ul>
</li>
<li>HEALTHCHECK NONE就是不做健康检查</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="SHELL"><a href="#SHELL" class="headerlink" title="SHELL"></a>SHELL</h4><ul>
<li>Introduction<ul>
<li>用来指定运行程序默认要使用的shell类型，因为windows环境默认是powershell。此指令一般不会使用。</li>
</ul>
</li>
<li>Syntax<ul>
<li>SHELL [“executable”, “parameters”]</li>
</ul>
</li>
</ul>
<h4 id="STOPSIGNAL"><a href="#STOPSIGNAL" class="headerlink" title="STOPSIGNAL"></a>STOPSIGNAL</h4><ul>
<li>Introduction<ul>
<li>指定发送使容器退出的系统调用信号。docker stop之所以能停止容器，就是发送了15的信号给容器内PID为1的进程。此指令一般不会使用。</li>
</ul>
</li>
<li>Syntax<ul>
<li>STOPSIGNAL signal</li>
</ul>
</li>
</ul>
<h4 id="ARG"><a href="#ARG" class="headerlink" title="ARG"></a>ARG</h4><ul>
<li>Introduction<ul>
<li>ARG命令同EVN类似，也是指定一个变量，但不同的是，ENV指令配合-e参数可以在docker run过程中传参，而使用ARG指令配合–build-arg参数可以在docker build过程中传参，这方便了我们为不同场景构建不同镜像。</li>
</ul>
</li>
<li>Syntax<ul>
<li>ARG <name>[=<default value>]</li>
</ul>
</li>
</ul>
<h4 id="ONBUILD"><a href="#ONBUILD" class="headerlink" title="ONBUILD"></a>ONBUILD</h4><ul>
<li>Introduction<ul>
<li>用于在Dockerfile中定义一个触发器。</li>
<li>ONBUILD后面指定的指令在docker build时是不会执行，构建完的镜像在被另一个Dockerfile文件中FROM指令所引用的时才会触发执行。</li>
</ul>
</li>
<li>Syntax<ul>
<li>ONBUILD [INSTRUCTION]<ul>
<li>几乎任何指令都可以成为触发器指令，但ONBUILD不能自我嵌套，且不会触发FROM和MAINTAINER指令，多数情况是使用RUN或者ADD。</li>
<li>另外在使用COPY指令时，应该注意后续引用该镜像的Dockerfile的同级目录下是否有被拷贝的文件。</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># dockerfile </span><br><span class="line">FROM python </span><br><span class="line">COPY containerfile  /root/containerfile</span><br><span class="line">RUN pip3 install -r /root/containerfile/requirements.txt </span><br><span class="line">ENV LANG=en_US.UTF-8</span><br><span class="line">ENV TZ=Asia/Shanghai</span><br><span class="line">RUN mkdir /usr/local/nodejs/ &amp;&amp; cp -r /root/containerfile/nodejs/node-v12.14.0-linux-x64/* /usr/local/nodejs/ &amp;&amp; ln -s /usr/local/nodejs/bin/node /usr/local/bin &amp;&amp; ln -s /usr/local/nodejs/bin/npm /usr/local/bin  &amp;&amp;  npm install hexo-cli -g </span><br><span class="line">RUN apt-get update &amp;&amp; apt-get install -y &amp;&amp; cp  /root/containerfile/.git* /root/ &amp;&amp; git init &amp;&amp; cp -r  /root/containerfile/.ssh /root/.ssh </span><br><span class="line">ENTRYPOINT [&quot;sh&quot;,&quot;/root/containerfile/run_server.sh&quot;]</span><br><span class="line">#CMD /bin/bash /root/containerfile/run_server.sh  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cat run_ser</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://yuanwanli1995.github.io/2022/02/16/2022-02-16-psp-seccomp%E5%AE%9E%E9%AA%8C%E8%AE%B0%E5%BD%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="yuanwanli">
      <meta itemprop="description" content="等不是办法，干才有出路">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="brisk">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/02/16/2022-02-16-psp-seccomp%E5%AE%9E%E9%AA%8C%E8%AE%B0%E5%BD%95/" class="post-title-link" itemprop="url">psp-seccomp实验记录</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-02-16 00:00:00" itemprop="dateCreated datePublished" datetime="2022-02-16T00:00:00+08:00">2022-02-16</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2022-02-21 14:54:31" itemprop="dateModified" datetime="2022-02-21T14:54:31+08:00">2022-02-21</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/k8s/" itemprop="url" rel="index"><span itemprop="name">k8s</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br></pre></td><td class="code"><pre><span class="line">内网ip 节点角色</span><br><span class="line">172.21.42.59 管理节点</span><br><span class="line">172.21.42.13 worker</span><br><span class="line">172.21.42.221 worker</span><br><span class="line">172.21.42.86 worker</span><br><span class="line">172.21.42.125 worker</span><br><span class="line">172.21.42.165 worker</span><br><span class="line">172.21.42.20 worker</span><br><span class="line">172.21.42.179 worker</span><br><span class="line">172.21.42.230 worker</span><br><span class="line">172.21.42.217 worker</span><br><span class="line"></span><br><span class="line">控制节点：</span><br><span class="line">172.21.42.59</span><br><span class="line"></span><br><span class="line">主机登录密码：</span><br><span class="line">Cmcc!234</span><br><span class="line"></span><br><span class="line"># 环境查看 </span><br><span class="line">[root@guoyangyong5-2 ~]# kubectl get node</span><br><span class="line">NAME            STATUS   ROLES                      AGE   VERSION</span><br><span class="line">172.21.42.125   Ready    worker                     33d   v1.15.5</span><br><span class="line">172.21.42.13    Ready    worker                     33d   v1.15.5</span><br><span class="line">172.21.42.165   Ready    worker                     33d   v1.15.5</span><br><span class="line">172.21.42.179   Ready    controlplane,etcd,worker   33d   v1.15.5</span><br><span class="line">172.21.42.20    Ready    controlplane,etcd,worker   33d   v1.15.5</span><br><span class="line">172.21.42.217   Ready    worker                     33d   v1.15.5</span><br><span class="line">172.21.42.221   Ready    worker                     33d   v1.15.5</span><br><span class="line">172.21.42.230   Ready    worker                     33d   v1.15.5</span><br><span class="line">172.21.42.59    Ready    controlplane,etcd,worker   33d   v1.15.5</span><br><span class="line">172.21.42.86    Ready    worker                     33d   v1.15.5</span><br><span class="line"></span><br><span class="line"># </span><br><span class="line">[root@guoyangyong5-2 ~]# kubectl get cs</span><br><span class="line">NAME                 STATUS    MESSAGE             ERROR</span><br><span class="line">controller-manager   Healthy   ok</span><br><span class="line">scheduler            Healthy   ok</span><br><span class="line">etcd-0               Healthy   &#123;&quot;health&quot;:&quot;true&quot;&#125;</span><br><span class="line">etcd-1               Healthy   &#123;&quot;health&quot;:&quot;true&quot;&#125;</span><br><span class="line">etcd-2               Healthy   &#123;&quot;health&quot;:&quot;true&quot;&#125;</span><br><span class="line">[root@guoyangyong5-2 ~]# kubectl get po --all-namespaces</span><br><span class="line">NAMESPACE       NAME                                                         READY   STATUS      RESTARTS   AGE</span><br><span class="line">argame          argame-admin-89bdfd874-9phjk                                 1/1     Running     0          4d17h</span><br><span class="line">argame          argame-center-6c6897c4d5-8v64w                               1/1     Running     0          4d21h</span><br><span class="line">argame          argame-front-admin-89f79748c-g2hrj                           1/1     Running     0          20h</span><br><span class="line">argame          argame-front-creator-c9648c8db-6c2db                         1/1     Running     0          20h</span><br><span class="line">argame          argame-front-h5-b4cb9874b-sk597                              1/1     Running     0          20h</span><br><span class="line">argame          argame-ws-668d98bf8-mpj6p                                    1/1     Running     0          44h</span><br><span class="line">argame          broker-a-0                                                   1/1     Running     0          5d22h</span><br><span class="line">argame          broker-a-s-0                                                 1/1     Running     0          5d22h</span><br><span class="line">argame          broker-b-0                                                   1/1     Running     0          5d22h</span><br><span class="line">argame          broker-b-s-0                                                 1/1     Running     0          5d22h</span><br><span class="line">argame          deploy-tool-7db578d688-ckbp2                                 1/1     Running     0          29d</span><br><span class="line">argame          mongodb-ar-0                                                 1/1     Running     0          26d</span><br><span class="line">argame          mq-externals-bd5c8d8fd-hhhs9                                 1/1     Running     0          5d22h</span><br><span class="line">argame          mq-namesrv-0                                                 1/1     Running     0          5d22h</span><br><span class="line">argame          mq-namesrv-1                                                 1/1     Running     0          5d22h</span><br><span class="line">argame          mysql-ar-0                                                   3/3     Running     1          27d</span><br><span class="line">argame          mysql-ar-1                                                   3/3     Running     0          27d</span><br><span class="line">argame          nginx-nas-666d78d975-vf6s6                                   1/1     Running     0          26d</span><br><span class="line">argame          redis-node-0                                                 2/2     Running     0          26d</span><br><span class="line">argame          redis-node-1                                                 2/2     Running     0          26d</span><br><span class="line">argame          redis-node-2                                                 2/2     Running     0          26d</span><br><span class="line">cattle-system   cattle-cluster-agent-7bdd7469bb-smqgp                        1/1     Running     0          33d</span><br><span class="line">cattle-system   cattle-node-agent-2s2cb                                      1/1     Running     0          33d</span><br><span class="line">cattle-system   cattle-node-agent-475vj                                      1/1     Running     0          33d</span><br><span class="line">cattle-system   cattle-node-agent-fnnn5                                      1/1     Running     0          33d</span><br><span class="line">cattle-system   cattle-node-agent-h7x6l                                      1/1     Running     0          33d</span><br><span class="line">cattle-system   cattle-node-agent-hdsr6                                      1/1     Running     0          33d</span><br><span class="line">cattle-system   cattle-node-agent-nkrcv                                      1/1     Running     0          33d</span><br><span class="line">cattle-system   cattle-node-agent-nl282                                      1/1     Running     0          33d</span><br><span class="line">cattle-system   cattle-node-agent-rrq8b                                      1/1     Running     0          33d</span><br><span class="line">cattle-system   cattle-node-agent-ss6s4                                      1/1     Running     0          33d</span><br><span class="line">cattle-system   cattle-node-agent-tr2m6                                      1/1     Running     0          33d</span><br><span class="line">cattle-system   rancher-58f96d87d7-87p96                                     1/1     Running     2          33d</span><br><span class="line">cattle-system   rancher-58f96d87d7-8khc6                                     1/1     Running     1          33d</span><br><span class="line">cattle-system   rancher-58f96d87d7-khltj                                     1/1     Running     3          33d</span><br><span class="line">default         ai-audit-service-6d7fd6cd97-kvrd6                            1/1     Running     0          6d20h</span><br><span class="line">default         av-processor-6cb6486b9c-4r8bw                                1/1     Running     0          6d19h</span><br><span class="line">default         av-service-d9879dddb-lpwnn                                   1/1     Running     0          8h</span><br><span class="line">default         chat-service-6846f69dd6-6vkrw                                1/1     Running     0          8h</span><br><span class="line">default         data-generator-1644973200-2cllb                              0/1     Error       0          137m</span><br><span class="line">default         data-generator-1644973200-fstln                              0/1     Error       0          136m</span><br><span class="line">default         data-generator-1644973200-jhn6n                              0/1     Error       0          138m</span><br><span class="line">default         data-generator-1644973200-st2qx                              0/1     Error       0          138m</span><br><span class="line">default         data-generator-1644973200-vsr29                              0/1     Error       0          133m</span><br><span class="line">default         data-generator-1644973200-xfbgv                              0/1     Error       0          139m</span><br><span class="line">default         data-generator-1644973200-zlx28                              0/1     Error       0          139m</span><br><span class="line">default         deploy-tool-66f865dcc-js8zc                                  1/1     Running     0          29d</span><br><span class="line">default         elasticsearch-master-0                                       1/1     Running     0          29d</span><br><span class="line">default         elasticsearch-master-1                                       1/1     Running     0          29d</span><br><span class="line">default         elasticsearch-master-2                                       1/1     Running     0          29d</span><br><span class="line">default         file-service-599f77db77-fvfmz                                1/1     Running     0          8h</span><br><span class="line">default         kafka-master-0                                               1/1     Running     1          29d</span><br><span class="line">default         kafka-master-1                                               1/1     Running     0          29d</span><br><span class="line">default         kafka-master-2                                               1/1     Running     1          29d</span><br><span class="line">default         kafka-master-zookeeper-0                                     1/1     Running     0          29d</span><br><span class="line">default         kibana-kibana-97bd7bff6-c6mks                                1/1     Running     0          19h</span><br><span class="line">default         kong-kong-2gbfm                                              2/2     Running     0          7h53m</span><br><span class="line">default         kong-kong-5fsn8                                              2/2     Running     0          7h52m</span><br><span class="line">default         kong-kong-645tk                                              2/2     Running     0          7h58m</span><br><span class="line">default         kong-kong-8dzlf                                              2/2     Running     0          7h57m</span><br><span class="line">default         kong-kong-j5m54                                              2/2     Running     0          7h57m</span><br><span class="line">default         kong-kong-kmd55                                              2/2     Running     0          7h54m</span><br><span class="line">default         kong-kong-kvlzg                                              2/2     Running     0          7h56m</span><br><span class="line">default         kong-kong-m9wkn                                              2/2     Running     0          7h51m</span><br><span class="line">default         kong-kong-nsmxz                                              2/2     Running     0          7h55m</span><br><span class="line">default         kong-kong-zgvd5                                              2/2     Running     0          7h54m</span><br><span class="line">default         live-service-777c5458cd-l2752                                1/1     Running     0          8h</span><br><span class="line">default         media-platform-ruiyue-service-854f85888f-ltbnj               1/1     Running     0          6d20h</span><br><span class="line">default         mysql-vr-0                                                   3/3     Running     0          29d</span><br><span class="line">default         mysql-vr-1                                                   3/3     Running     0          29d</span><br><span class="line">default         nginx-nas-6cd898cb5f-gkklh                                   1/1     Running     0          28d</span><br><span class="line">default         redis609-node-0                                              2/2     Running     0          29d</span><br><span class="line">default         redis609-node-1                                              2/2     Running     0          29d</span><br><span class="line">default         redis609-node-2                                              2/2     Running     0          29d</span><br><span class="line">default         srs-edge-cfc4f6d89-ph724                                     1/1     Running     0          29d</span><br><span class="line">default         srs-source-0                                                 2/2     Running     0          29d</span><br><span class="line">default         vod-service-6f5dbb9cb6-kvqsj                                 1/1     Running     0          8h</span><br><span class="line">default         vr-cms-activity-5848b97955-4nfbg                             1/1     Running     0          8h</span><br><span class="line">default         vr-cms-admin-microservice-consumer-745c8cffc7-bkl9x          1/1     Running     0          8h</span><br><span class="line">default         vr-cms-admin-microservice-consumer-745c8cffc7-r9jnc          1/1     Running     0          8h</span><br><span class="line">default         vr-cms-auth-server-79f57bbfbb-jvtjv                          1/1     Running     0          8h</span><br><span class="line">default         vr-cms-auth-server-79f57bbfbb-jwvtk                          1/1     Running     0          8h</span><br><span class="line">default         vr-cms-config-server-767df5989b-4gkkk                        1/1     Running     0          18h</span><br><span class="line">default         vr-cms-config-server-767df5989b-9b8sp                        1/1     Running     0          18h</span><br><span class="line">default         vr-cms-content-sync-1644804000-l4n4v                         0/1     Completed   0          2d1h</span><br><span class="line">default         vr-cms-content-sync-1644890400-b2b78                         0/1     Completed   0          25h</span><br><span class="line">default         vr-cms-content-sync-1644976800-qnsvz                         0/1     Completed   0          79m</span><br><span class="line">default         vr-cms-customer-microservice-consumer-fb9df8bd6-5dpgd        1/1     Running     0          8h</span><br><span class="line">default         vr-cms-customer-microservice-consumer-fb9df8bd6-gxkpp        1/1     Running     0          8h</span><br><span class="line">default         vr-cms-front-client-76b464f7c8-ts8ps                         1/1     Running     0          8h</span><br><span class="line">default         vr-cms-front-mgr-6c77cbff68-dnfvq                            1/1     Running     0          21m</span><br><span class="line">default         vr-cms-front-portal-6cdc959586-2x8vq                         1/1     Running     0          116m</span><br><span class="line">default         vr-cms-front-svc-598774556-cxm4q                             1/1     Running     0          7h59m</span><br><span class="line">default         vr-cms-media-microservice-provider-6bcd4f7c54-fqzrf          1/1     Running     0          8h</span><br><span class="line">default         vr-cms-primary-data-microservice-provider-7ff77df5db-92qkg   1/1     Running     0          8h</span><br><span class="line">default         vr-cms-primary-data-microservice-provider-7ff77df5db-mzlwn   1/1     Running     0          8h</span><br><span class="line">default         vr-cms-primary-data-microservice-provider-7ff77df5db-n8dq6   1/1     Running     0          8h</span><br><span class="line">default         vr-cms-statistics-85494c478-d5kdx                            1/1     Running     0          8h</span><br><span class="line">default         vr-cms-task-74d94c9fb4-zb8hc                                 1/1     Running     0          8h</span><br><span class="line">default         vr-cms-user-microservice-provider-8ccb95449-nlmdh            1/1     Running     0          8h</span><br><span class="line">ingress-nginx   default-http-backend-5bcc9fd598-tmkb8                        1/1     Running     0          33d</span><br><span class="line">ingress-nginx   nginx-ingress-controller-2wln7                               1/1     Running     0          33d</span><br><span class="line">ingress-nginx   nginx-ingress-controller-b5j7p                               1/1     Running     0          33d</span><br><span class="line">ingress-nginx   nginx-ingress-controller-d7f94                               1/1     Running     0          33d</span><br><span class="line">ingress-nginx   nginx-ingress-controller-fz9vp                               1/1     Running     1          33d</span><br><span class="line">ingress-nginx   nginx-ingress-controller-phgpx                               1/1     Running     0          33d</span><br><span class="line">ingress-nginx   nginx-ingress-controller-pmstz                               1/1     Running     0          33d</span><br><span class="line">ingress-nginx   nginx-ingress-controller-qczwd                               1/1     Running     0          33d</span><br><span class="line">ingress-nginx   nginx-ingress-controller-v5kzw                               1/1     Running     0          33d</span><br><span class="line">ingress-nginx   nginx-ingress-controller-vjb78                               1/1     Running     0          33d</span><br><span class="line">ingress-nginx   nginx-ingress-controller-x9r2s                               1/1     Running     0          33d</span><br><span class="line">kube-system     calico-kube-controllers-77cd95cb44-czv9l                     1/1     Running     0          33d</span><br><span class="line">kube-system     calico-node-2ft58                                            1/1     Running     0          33d</span><br><span class="line">kube-system     calico-node-46ztz                                            1/1     Running     0          33d</span><br><span class="line">kube-system     calico-node-4lfwb                                            1/1     Running     0          33d</span><br><span class="line">kube-system     calico-node-7z42b                                            1/1     Running     0          33d</span><br><span class="line">kube-system     calico-node-7zvvk                                            1/1     Running     0          33d</span><br><span class="line">kube-system     calico-node-hbqch                                            1/1     Running     0          33d</span><br><span class="line">kube-system     calico-node-lvszp                                            1/1     Running     0          33d</span><br><span class="line">kube-system     calico-node-m5bbq                                            1/1     Running     0          33d</span><br><span class="line">kube-system     calico-node-qj6qj                                            1/1     Running     0          33d</span><br><span class="line">kube-system     calico-node-w54qv                                            1/1     Running     0          33d</span><br><span class="line">kube-system     coredns-7ddb5877d9-4m7lw                                     1/1     Running     0          30d</span><br><span class="line">kube-system     coredns-7ddb5877d9-ldvrg                                     1/1     Running     0          30d</span><br><span class="line">kube-system     coredns-7ddb5877d9-r9fpl                                     1/1     Running     0          30d</span><br><span class="line">kube-system     coredns-autoscaler-84766fbb4-c5rz8                           1/1     Running     0          33d</span><br><span class="line">kube-system     metrics-server-59c6fd6767-mfzvt                              1/1     Running     0          33d</span><br><span class="line">kube-system     rke-coredns-addon-deploy-job-8fzgq                           0/1     Completed   0          33d</span><br><span class="line">kube-system     rke-ingress-controller-deploy-job-tv8xf                      0/1     Completed   0          33d</span><br><span class="line">kube-system     rke-metrics-addon-deploy-job-5nml9                           0/1     Completed   0          33d</span><br><span class="line">kube-system     rke-network-plugin-deploy-job-6nhbh                          0/1     Completed   0          33d</span><br><span class="line">kube-system     tiller-deploy-6658594489-kjcpk                               1/1     Running     0          33d</span><br><span class="line">upsource        upsource-697d5f8f68-d6tt8                                    1/1     Running     0          29d</span><br><span class="line">vr-center       vr-center-auth-server-798cbdd476-nw2qz                       1/1     Running     0          8h</span><br><span class="line">vr-center       vr-center-config-server-5b646545b8-gdxwp                     1/1     Running     0          4d21h</span><br><span class="line">vr-center       vr-center-front-mgr-86d77b499b-gbpm7                         1/1     Running     0          8h</span><br><span class="line">vr-center       vr-center-platform-consumer-5f5fdf77dc-g8gvc                 1/1     Running     0          8h</span><br><span class="line">vr-center       vr-center-statistics-df68f4774-gs6nk                         1/1     Running     0          8h</span><br><span class="line">vr-center       vr-center-user-server-584d7955ff-fjnr9                       1/1     Running     0          8h</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@guoyangyong5-2 ~]# kubectl get deploy  --all-namespaces</span><br><span class="line">NAMESPACE       NAME                                        READY   UP-TO-DATE   AVAILABLE   AGE</span><br><span class="line">argame          argame-admin                                1/1     1            1           4d17h</span><br><span class="line">argame          argame-center                               1/1     1            1           25d</span><br><span class="line">argame          argame-front-admin                          1/1     1            1           26d</span><br><span class="line">argame          argame-front-creator                        1/1     1            1           26d</span><br><span class="line">argame          argame-front-h5                             1/1     1            1           26d</span><br><span class="line">argame          argame-ws                                   1/1     1            1           25d</span><br><span class="line">argame          deploy-tool                                 1/1     1            1           29d</span><br><span class="line">argame          mq-externals                                1/1     1            1           5d22h</span><br><span class="line">argame          nginx-nas                                   1/1     1            1           26d</span><br><span class="line">cattle-system   cattle-cluster-agent                        1/1     1            1           33d</span><br><span class="line">cattle-system   rancher                                     3/3     3            3           33d</span><br><span class="line">default         ai-audit-service                            1/1     1            1           29d</span><br><span class="line">default         av-processor                                1/1     1            1           29d</span><br><span class="line">default         av-service                                  1/1     1            1           29d</span><br><span class="line">default         chat-service                                1/1     1            1           29d</span><br><span class="line">default         deploy-tool                                 1/1     1            1           29d</span><br><span class="line">default         file-service                                1/1     1            1           29d</span><br><span class="line">default         kibana-kibana                               1/1     1            1           19h</span><br><span class="line">default         live-service                                1/1     1            1           29d</span><br><span class="line">default         media-platform-ruiyue-service               1/1     1            1           29d</span><br><span class="line">default         nginx-nas                                   1/1     1            1           29d</span><br><span class="line">default         srs-edge                                    1/1     1            1           29d</span><br><span class="line">default         vod-service                                 1/1     1            1           29d</span><br><span class="line">default         vr-cms-activity                             1/1     1            1           29d</span><br><span class="line">default         vr-cms-admin-microservice-consumer          2/2     2            2           29d</span><br><span class="line">default         vr-cms-auth-server                          2/2     2            2           29d</span><br><span class="line">default         vr-cms-config-server                        2/2     2            2           29d</span><br><span class="line">default         vr-cms-customer-microservice-consumer       2/2     2            2           29d</span><br><span class="line">default         vr-cms-front-client                         1/1     1            1           29d</span><br><span class="line">default         vr-cms-front-mgr                            1/1     1            1           29d</span><br><span class="line">default         vr-cms-front-portal                         1/1     1            1           29d</span><br><span class="line">default         vr-cms-front-svc                            1/1     1            1           29d</span><br><span class="line">default         vr-cms-media-microservice-provider          1/1     1            1           29d</span><br><span class="line">default         vr-cms-primary-data-microservice-provider   3/3     3            3           29d</span><br><span class="line">default         vr-cms-statistics                           1/1     1            1           29d</span><br><span class="line">default         vr-cms-task                                 1/1     1            1           29d</span><br><span class="line">default         vr-cms-user-microservice-provider           1/1     1            1           29d</span><br><span class="line">ingress-nginx   default-http-backend                        1/1     1            1           33d</span><br><span class="line">kube-system     calico-kube-controllers                     1/1     1            1           33d</span><br><span class="line">kube-system     coredns                                     3/3     3            3           33d</span><br><span class="line">kube-system     coredns-autoscaler                          1/1     1            1           33d</span><br><span class="line">kube-system     metrics-server                              1/1     1            1           33d</span><br><span class="line">kube-system     tiller-deploy                               1/1     1            1           33d</span><br><span class="line">upsource        upsource                                    1/1     1            1           29d</span><br><span class="line">vr-center       vr-center-auth-server                       1/1     1            1           28d</span><br><span class="line">vr-center       vr-center-config-server                     1/1     1            1           27d</span><br><span class="line">vr-center       vr-center-front-mgr                         1/1     1            1           29d</span><br><span class="line">vr-center       vr-center-platform-consumer                 1/1     1            1           7d20h</span><br><span class="line">vr-center       vr-center-statistics                        1/1     1            1           27d</span><br><span class="line">vr-center       vr-center-user-server                       1/1     1            1           22d</span><br><span class="line"></span><br><span class="line">[root@guoyangyong5-2 ~]# kubectl get sts  --all-namespaces</span><br><span class="line">NAMESPACE   NAME                     READY   AGE</span><br><span class="line">argame      broker-a                 1/1     5d22h</span><br><span class="line">argame      broker-a-s               1/1     5d22h</span><br><span class="line">argame      broker-b                 1/1     5d22h</span><br><span class="line">argame      broker-b-s               1/1     5d22h</span><br><span class="line">argame      mongodb-ar               1/1     26d</span><br><span class="line">argame      mq-namesrv               2/2     5d22h</span><br><span class="line">argame      mysql-ar                 2/2     27d</span><br><span class="line">argame      redis-node               3/3     26d</span><br><span class="line">default     elasticsearch-master     3/3     29d</span><br><span class="line">default     kafka-master             3/3     29d</span><br><span class="line">default     kafka-master-zookeeper   1/1     29d</span><br><span class="line">default     mysql-vr                 2/2     29d</span><br><span class="line">default     redis609-node            3/3     29d</span><br><span class="line">default     srs-source               1/1     29d</span><br><span class="line">[root@guoyangyong5-2 ~]# kubectl get svc  --all-namespaces</span><br><span class="line">NAMESPACE       NAME                                        TYPE        CLUSTER-IP      EXTERNAL-IP     PORT(S)                         AGE</span><br><span class="line">argame          argame-admin-service                        ClusterIP   10.43.207.157   &lt;none&gt;          80/TCP                          4d17h</span><br><span class="line">argame          argame-center                               ClusterIP   10.43.194.255   &lt;none&gt;          80/TCP                          25d</span><br><span class="line">argame          argame-front-admin                          ClusterIP   10.43.112.47    &lt;none&gt;          80/TCP                          26d</span><br><span class="line">argame          argame-front-creator-service                ClusterIP   10.43.8.255     &lt;none&gt;          80/TCP                          26d</span><br><span class="line">argame          argame-front-h5-service                     ClusterIP   10.43.174.74    &lt;none&gt;          80/TCP                          26d</span><br><span class="line">argame          argame-ws-service                           ClusterIP   10.43.137.49    &lt;none&gt;          82/TCP                          25d</span><br><span class="line">argame          broker-a                                    NodePort    10.43.186.31    &lt;none&gt;          20911:30911/TCP                 5d22h</span><br><span class="line">argame          broker-a-s                                  NodePort    10.43.76.110    &lt;none&gt;          20911:30912/TCP                 5d22h</span><br><span class="line">argame          broker-b                                    NodePort    10.43.164.81    &lt;none&gt;          20911:30913/TCP                 5d22h</span><br><span class="line">argame          broker-b-s                                  NodePort    10.43.105.36    &lt;none&gt;          20911:30914/TCP                 5d22h</span><br><span class="line">argame          deploy-tool                                 ClusterIP   10.43.133.72    &lt;none&gt;          8000/TCP                        29d</span><br><span class="line">argame          mongodb-ar                                  ClusterIP   10.43.215.195   &lt;none&gt;          27017/TCP                       26d</span><br><span class="line">argame          mq-externals                                NodePort    10.43.94.18     &lt;none&gt;          80:30916/TCP                    5d22h</span><br><span class="line">argame          mq-namesrv                                  NodePort    10.43.152.233   &lt;none&gt;          20901:30915/TCP                 5d22h</span><br><span class="line">argame          mysql-ar                                    ClusterIP   10.43.198.144   &lt;none&gt;          3306/TCP                        27d</span><br><span class="line">argame          nginx-nas                                   ClusterIP   10.43.172.184   &lt;none&gt;          80/TCP                          26d</span><br><span class="line">argame          redis                                       ClusterIP   10.43.173.9     &lt;none&gt;          6379/TCP,26379/TCP              26d</span><br><span class="line">argame          redis-headless                              ClusterIP   None            &lt;none&gt;          6379/TCP,26379/TCP              26d</span><br><span class="line">cattle-system   rancher                                     ClusterIP   10.43.163.76    &lt;none&gt;          80/TCP                          33d</span><br><span class="line">default         ai-audit-service                            NodePort    10.43.80.242    &lt;none&gt;          80:31199/TCP                    29d</span><br><span class="line">default         av-processor                                NodePort    10.43.17.113    &lt;none&gt;          80:31196/TCP                    29d</span><br><span class="line">default         av-service                                  NodePort    10.43.244.44    &lt;none&gt;          80:31195/TCP                    29d</span><br><span class="line">default         chat-service                                ClusterIP   10.43.135.113   &lt;none&gt;          80/TCP                          29d</span><br><span class="line">default         chat-service-ws                             ClusterIP   10.43.86.245    &lt;none&gt;          81/TCP,82/TCP                   29d</span><br><span class="line">default         deploy-tool                                 ClusterIP   10.43.255.23    &lt;none&gt;          8000/TCP                        29d</span><br><span class="line">default         elasticsearch-master                        ClusterIP   10.43.30.102    &lt;none&gt;          9200/TCP,9300/TCP               29d</span><br><span class="line">default         elasticsearch-master-dev                    NodePort    10.43.179.22    &lt;none&gt;          9200:30029/TCP,9300:30871/TCP   29d</span><br><span class="line">default         elasticsearch-master-headless               ClusterIP   None            &lt;none&gt;          9200/TCP,9300/TCP               29d</span><br><span class="line">default         file-service                                ClusterIP   10.43.171.87    &lt;none&gt;          80/TCP                          29d</span><br><span class="line">default         gd-upstream-service                         ClusterIP   10.43.67.1      &lt;none&gt;          80/TCP                          29d</span><br><span class="line">default         kafka-master                                ClusterIP   10.43.188.87    &lt;none&gt;          9092/TCP                        29d</span><br><span class="line">default         kafka-master-headless                       ClusterIP   None            &lt;none&gt;          9092/TCP,9093/TCP               29d</span><br><span class="line">default         kafka-master-zookeeper                      ClusterIP   10.43.65.89     &lt;none&gt;          2181/TCP,2888/TCP,3888/TCP      29d</span><br><span class="line">default         kafka-master-zookeeper-headless             ClusterIP   None            &lt;none&gt;          2181/TCP,2888/TCP,3888/TCP      29d</span><br><span class="line">default         kibana-kibana                               ClusterIP   10.43.149.102   &lt;none&gt;          5601/TCP                        19h</span><br><span class="line">default         kibana-kibana-dev                           NodePort    10.43.243.8     &lt;none&gt;          5601:31065/TCP                  19h</span><br><span class="line">default         kong-kong-admin                             ClusterIP   10.43.97.140    &lt;none&gt;          8001/TCP                        29d</span><br><span class="line">default         kong-kong-proxy                             ClusterIP   10.43.188.65    &lt;none&gt;          80/TCP,443/TCP                  29d</span><br><span class="line">default         kubernetes                                  ClusterIP   10.43.0.1       &lt;none&gt;          443/TCP                         33d</span><br><span class="line">default         live-service                                NodePort    10.43.141.213   &lt;none&gt;          80:31193/TCP                    29d</span><br><span class="line">default         media-platform-ruiyue-service               NodePort    10.43.160.183   &lt;none&gt;          8080:30201/TCP                  29d</span><br><span class="line">default         mysql-vr                                    NodePort    10.43.10.12     &lt;none&gt;          3306:30308/TCP                  29d</span><br><span class="line">default         nginx-nas                                   ClusterIP   10.43.101.41    &lt;none&gt;          80/TCP                          29d</span><br><span class="line">default         redis609                                    ClusterIP   10.43.164.54    &lt;none&gt;          6379/TCP,26379/TCP              29d</span><br><span class="line">default         redis609-headless                           ClusterIP   None            &lt;none&gt;          6379/TCP,26379/TCP              29d</span><br><span class="line">default         srs-edge                                    ClusterIP   10.43.73.138    172.21.42.251   1935/TCP                        29d</span><br><span class="line">default         srs-source                                  ClusterIP   10.43.55.227    172.21.42.251   1936/TCP,1985/TCP,8000/TCP      29d</span><br><span class="line">default         srs-source-headless                         ClusterIP   None            &lt;none&gt;          &lt;none&gt;                          29d</span><br><span class="line">default         vod-service                                 NodePort    10.43.184.189   &lt;none&gt;          80:31198/TCP                    29d</span><br><span class="line">default         vr-cms-activity                             NodePort    10.43.191.67    &lt;none&gt;          80:31188/TCP                    29d</span><br><span class="line">default         vr-cms-admin-microservice-consumer          NodePort    10.43.197.62    &lt;none&gt;          80:30113/TCP                    29d</span><br><span class="line">default         vr-cms-auth-server                          NodePort    10.43.153.174   &lt;none&gt;          80:30110/TCP                    29d</span><br><span class="line">default         vr-cms-config-server                        NodePort    10.43.15.27     &lt;none&gt;          80:30111/TCP                    29d</span><br><span class="line">default         vr-cms-customer-microservice-consumer       NodePort    10.43.230.134   &lt;none&gt;          80:30114/TCP                    29d</span><br><span class="line">default         vr-cms-front-client-server                  ClusterIP   10.43.48.58     &lt;none&gt;          80/TCP                          29d</span><br><span class="line">default         vr-cms-front-client-svc                     ClusterIP   10.43.128.77    &lt;none&gt;          80/TCP                          29d</span><br><span class="line">default         vr-cms-front-mgr-server                     ClusterIP   10.43.153.149   &lt;none&gt;          80/TCP                          29d</span><br><span class="line">default         vr-cms-front-portal-server                  ClusterIP   10.43.233.216   &lt;none&gt;          80/TCP                          29d</span><br><span class="line">default         vr-cms-media-microservice-provider          NodePort    10.43.242.130   &lt;none&gt;          80:30131/TCP                    29d</span><br><span class="line">default         vr-cms-primary-data-microservice-provider   NodePort    10.43.125.27    &lt;none&gt;          80:30141/TCP                    29d</span><br><span class="line">default         vr-cms-statistics                           NodePort    10.43.94.53     &lt;none&gt;          80:30151/TCP                    29d</span><br><span class="line">default         vr-cms-task                                 NodePort    10.43.143.132   &lt;none&gt;          80:30115/TCP                    29d</span><br><span class="line">default         vr-cms-user-microservice-provider           NodePort    10.43.161.237   &lt;none&gt;          80:30120/TCP                    29d</span><br><span class="line">ingress-nginx   default-http-backend                        ClusterIP   10.43.253.136   &lt;none&gt;          80/TCP                          33d</span><br><span class="line">kube-system     kube-dns                                    ClusterIP   10.43.0.10      &lt;none&gt;          53/UDP,53/TCP,9153/TCP          33d</span><br><span class="line">kube-system     metrics-server                              ClusterIP   10.43.244.182   &lt;none&gt;          443/TCP                         33d</span><br><span class="line">kube-system     tiller-deploy                               ClusterIP   10.43.130.160   &lt;none&gt;          44134/TCP                       33d</span><br><span class="line">upsource        upsource-svc                                ClusterIP   10.43.223.22    &lt;none&gt;          8080/TCP                        29d</span><br><span class="line">vr-center       vr-center-auth-server                       NodePort    10.43.236.60    &lt;none&gt;          80:32003/TCP                    28d</span><br><span class="line">vr-center       vr-center-config-server                     NodePort    10.43.220.77    &lt;none&gt;          80:32001/TCP                    27d</span><br><span class="line">vr-center       vr-center-front-mgr-server                  NodePort    10.43.142.56    &lt;none&gt;          80:32101/TCP                    29d</span><br><span class="line">vr-center       vr-center-platform-consumer                 NodePort    10.43.250.139   &lt;none&gt;          80:32002/TCP                    7d20h</span><br><span class="line">vr-center       vr-center-statistics                        NodePort    10.43.121.78    &lt;none&gt;          80:32005/TCP                    27d</span><br><span class="line">vr-center       vr-center-user-server                       NodePort    10.43.79.150    &lt;none&gt;          80:32004/TCP                    22d</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">ansible </span><br><span class="line">#修改cluster.yml 修改 psp: true </span><br><span class="line">rke up 失败， --&gt; 版本不对</span><br><span class="line"></span><br><span class="line">使用rke032， 失败， 部分节点公钥被改，不能免密</span><br><span class="line">172.21.42.221</span><br><span class="line">172.21.42.230,</span><br><span class="line">172.21.42.179,</span><br><span class="line">172.21.42.165,</span><br><span class="line">172.21.42.125,</span><br><span class="line">172.21.42.217,</span><br><span class="line">172.21.42.20,</span><br><span class="line">172.21.42.13</span><br><span class="line">--&gt;添加公钥</span><br><span class="line">按照172.21.42.59的公钥拷贝，主机登录密码Cmcc!234 </span><br><span class="line"></span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://yuanwanli1995.github.io/2022/02/10/2022-02-10-python-module-json/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="yuanwanli">
      <meta itemprop="description" content="等不是办法，干才有出路">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="brisk">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/02/10/2022-02-10-python-module-json/" class="post-title-link" itemprop="url">python  module json</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-02-10 00:00:00" itemprop="dateCreated datePublished" datetime="2022-02-10T00:00:00+08:00">2022-02-10</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2022-02-21 14:54:31" itemprop="dateModified" datetime="2022-02-21T14:54:31+08:00">2022-02-21</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import json </span><br><span class="line"># dic-&gt; json </span><br><span class="line">json.dumps()</span><br><span class="line"># json-&gt; dic </span><br><span class="line">json.loads()</span><br></pre></td></tr></table></figure>

<p>函数原型</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">json.dumps(obj, skipkeys=False, ensure_ascii=True, check_circular=True, allow_nan=True, cls=None, indent=None, separators=None, encoding=&quot;utf-8&quot;, default=None, sort_keys=False, **kw)</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">yuanwanli</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="/js/third-party/search/local-search.js"></script>




  





</body>
</html>
