<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"yuanwanli1995.github.io","root":"/","images":"/images","scheme":"Pisces","version":"8.7.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/./public/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>
<meta name="description" content="等不是办法，干才有出路">
<meta property="og:type" content="website">
<meta property="og:title" content="brisk">
<meta property="og:url" content="http://yuanwanli1995.github.io/index.html">
<meta property="og:site_name" content="brisk">
<meta property="og:description" content="等不是办法，干才有出路">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="yuanwanli">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://yuanwanli1995.github.io/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>brisk</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">brisk</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">welcome</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-overview">
            <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">yuanwanli</p>
  <div class="site-description" itemprop="description">等不是办法，干才有出路</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">84</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>



          </div>
        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://yuanwanli1995.github.io/2022/03/21/2022-03-21-rancher-bug/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="yuanwanli">
      <meta itemprop="description" content="等不是办法，干才有出路">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="brisk">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/03/21/2022-03-21-rancher-bug/" class="post-title-link" itemprop="url">rancher bug</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-03-21 00:00:00 / 修改时间：09:33:52" itemprop="dateCreated datePublished" datetime="2022-03-21T00:00:00+08:00">2022-03-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/bug/" itemprop="url" rel="index"><span itemprop="name">bug</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>导入集群之后一直在pending状态</p>
<p>查找到集群的rancher agent,   deploy, pods </p>
<p>发现po没有起</p>
<p>查看日志， 发现连不通rancher服务443端口</p>
<p>解决： 新增策略</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://yuanwanli1995.github.io/2022/03/19/2021-12-23-harbor%E6%98%AF%E4%BB%80%E4%B9%88/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="yuanwanli">
      <meta itemprop="description" content="等不是办法，干才有出路">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="brisk">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/03/19/2021-12-23-harbor%E6%98%AF%E4%BB%80%E4%B9%88/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-03-19 23:31:24" itemprop="dateCreated datePublished" datetime="2022-03-19T23:31:24+08:00">2022-03-19</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <hr>
<p>title： harbor搭建<br>date：2021-12-23<br>categories：编程笔记</p>
<hr>
<h3 id="1-harbor是什么"><a href="#1-harbor是什么" class="headerlink" title="1 harbor是什么"></a>1 harbor是什么</h3><p>Harbor是一个开源镜像仓库，它使用策略和基于角色的访问控制来保护镜像，确保镜像被扫描并没有漏洞，并将图像标记为受信任的。Harbor是CNCF的一个孵化的项目，提供合规、性能和互操作性，帮助您在Kubernetes和Docker等云本地计算平台上一致安全地管理工件。</p>
<p>简而言之， harbor就是跟docker hub差不多的镜像仓库，是一个开源仓库框架。  <a target="_blank" rel="noopener" href="https://demo.goharbor.io/">https://demo.goharbor.io</a>.这是官网提供的样本仓库，看看就明白了。 搭建出来的东西和这个是一样的。 类似的仓库也有不少，官方给出了比较。<a target="_blank" rel="noopener" href="https://goharbor.io/docs/2.4.0/install-config/harbor-compatibility-list/">Harbor docs | Harbor Compatibility List (goharbor.io)</a></p>
<h3 id="2-harbor特性"><a href="#2-harbor特性" class="headerlink" title="2 harbor特性"></a>2 harbor特性</h3><h3 id="3-harbor搭建"><a href="#3-harbor搭建" class="headerlink" title="3 harbor搭建"></a>3 harbor搭建</h3><p>harbor提供release, 搭建也很简单，只是harbor本身不提供证书， 需要第三方或自签的证书。  </p>
<h4 id="3-1-搭建harbor基本要求"><a href="#3-1-搭建harbor基本要求" class="headerlink" title="3.1 搭建harbor基本要求"></a>3.1 搭建harbor基本要求</h4><p><strong>硬件</strong></p>
<table>
<thead>
<tr>
<th align="left">Resource</th>
<th align="left">Minimum</th>
<th align="left">Recommended</th>
</tr>
</thead>
<tbody><tr>
<td align="left">CPU</td>
<td align="left">2 CPU</td>
<td align="left">4 CPU</td>
</tr>
<tr>
<td align="left">Mem</td>
<td align="left">4 GB</td>
<td align="left">8 GB</td>
</tr>
<tr>
<td align="left">Disk</td>
<td align="left">40 GB</td>
<td align="left">160 GB</td>
</tr>
</tbody></table>
<p><strong>软件</strong></p>
<table>
<thead>
<tr>
<th align="left">Software</th>
<th align="left">Version</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Docker engine</td>
<td align="left">Version 17.06.0-ce+ or higher</td>
<td align="left">For installation instructions, see <a target="_blank" rel="noopener" href="https://docs.docker.com/engine/installation/">Docker Engine documentation</a></td>
</tr>
<tr>
<td align="left">Docker Compose</td>
<td align="left">Version 1.18.0 or higher</td>
<td align="left">For installation instructions, see <a target="_blank" rel="noopener" href="https://docs.docker.com/compose/install/">Docker Compose documentation</a></td>
</tr>
<tr>
<td align="left">Openssl</td>
<td align="left">Latest is preferred</td>
<td align="left">Used to generate certificate and keys for Harbor</td>
</tr>
</tbody></table>
<p><strong>网络</strong></p>
<table>
<thead>
<tr>
<th align="left">Port</th>
<th align="left">Protocol</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">443</td>
<td align="left">HTTPS</td>
<td align="left">Harbor portal and core API accept HTTPS requests on this port. You can change this port in the configuration file.</td>
</tr>
<tr>
<td align="left">4443</td>
<td align="left">HTTPS</td>
<td align="left">Connections to the Docker Content Trust service for Harbor. Only required if Notary is enabled. You can change this port in the configuration file.</td>
</tr>
<tr>
<td align="left">80</td>
<td align="left">HTTP</td>
<td align="left">Harbor portal and core API accept HTTP requests on this port. You can change this port in the configuration file.</td>
</tr>
</tbody></table>
<h3 id="3-2-配置HTTPS访问harbor"><a href="#3-2-配置HTTPS访问harbor" class="headerlink" title="3.2  配置HTTPS访问harbor"></a>3.2  配置HTTPS访问harbor</h3><p>Harbor不提供证书。所以配置HTTPS时，需要先创建SSL证书。 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">mkdir harbor &amp;&amp; cd harbor</span><br><span class="line"># 生成CA证书私钥</span><br><span class="line">openssl genrsa -out ca.key 4096</span><br><span class="line"></span><br><span class="line"># 生成CA证书</span><br><span class="line">openssl req -x509 -new -nodes -sha512 -days 3650 \</span><br><span class="line"> -subj &quot;/C=CN/ST=Beijing/L=Beijing/O=example/OU=Personal/CN=myharbor.com&quot; \</span><br><span class="line"> -key ca.key \</span><br><span class="line"> -out ca.crt</span><br><span class="line"> </span><br><span class="line"># 生成服务器证书, 证书通常包含一个.crt文件和一个.key文件，例如myharbor.com.crt和myharbor.com.key</span><br><span class="line">openssl genrsa -out myharbor.com.key 4096</span><br><span class="line"></span><br><span class="line"># 生成证书签名请求(CSR) </span><br><span class="line">openssl req -sha512 -new \</span><br><span class="line">    -subj &quot;/C=CN/ST=Beijing/L=Beijing/O=example/OU=Personal/CN=myharbor.com&quot; \</span><br><span class="line">    -key myharbor.com.key \</span><br><span class="line">    -out myharbor.com.csr</span><br><span class="line">    </span><br><span class="line"># 生成x509 v3扩展文件 </span><br><span class="line">cat &gt; v3.ext &lt;&lt;-EOF</span><br><span class="line">authorityKeyIdentifier=keyid,issuer</span><br><span class="line">basicConstraints=CA:FALSE</span><br><span class="line">keyUsage = digitalSignature, nonRepudiation, keyEncipherment, dataEncipherment</span><br><span class="line">extendedKeyUsage = serverAuth</span><br><span class="line">subjectAltName = @alt_names</span><br><span class="line"></span><br><span class="line">[alt_names]</span><br><span class="line">DNS.1=myharbor.com</span><br><span class="line">DNS.2=myharbor</span><br><span class="line">DNS.3=hostname</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># 使用v3.ext文件为Harbor主机生成证书 </span><br><span class="line">openssl x509 -req -sha512 -days 3650 \</span><br><span class="line">    -extfile v3.ext \</span><br><span class="line">    -CA ca.crt -CAkey ca.key -CAcreateserial \</span><br><span class="line">    -in myharbor.com.csr \</span><br><span class="line">    -out myharbor.com.crt </span><br><span class="line">    </span><br><span class="line"># 向harbor和docker提供证书 </span><br><span class="line"># 将服务器证书和密钥复制到您的Harbor host的证书文件夹中</span><br><span class="line">mkdir /data/cert/ </span><br><span class="line">cp myharbor.com.crt /data/cert/</span><br><span class="line">cp myharbor.com.key /data/cert/</span><br><span class="line"></span><br><span class="line"># 将.crt转换为.cert，以供Docker使用</span><br><span class="line">openssl x509 -inform PEM -in /data/cert/myharbor.com.crt -out /data/cert/myharbor.com.cert</span><br><span class="line"></span><br><span class="line"># 将服务器证书、密钥和CA文件复制到Harbor主机的Docker证书文件夹中 </span><br><span class="line">mkdir -p /etc/docker/certs.d/myharbor.com/</span><br><span class="line">cp myharbor.com.cert /etc/docker/certs.d/myharbor.com/</span><br><span class="line">cp myharbor.com.key /etc/docker/certs.d/myharbor.com/</span><br><span class="line">cp ca.crt /etc/docker/certs.d/myharbor.com/ </span><br><span class="line"></span><br><span class="line">cp /data/cert/myharbor.com.cert /etc/docker/certs.d/myharbor.com/</span><br><span class="line"># 查看证书</span><br><span class="line">[root@k8s-node02 harbor]# ll -a</span><br><span class="line">-rw-r--r--  1 root root 2029 Dec 23 15:37 ca.crt</span><br><span class="line">-rw-r--r--  1 root root 3243 Dec 23 15:37 ca.key</span><br><span class="line">-rw-r--r--  1 root root   17 Dec 23 15:41 ca.srl</span><br><span class="line">-rw-r--r--  1 root root 2090 Dec 23 15:42 myharbor.com.cert</span><br><span class="line">-rw-r--r--  1 root root 2090 Dec 23 15:41 myharbor.com.crt</span><br><span class="line">-rw-r--r--  1 root root 1704 Dec 23 15:40 myharbor.com.csr</span><br><span class="line">-rw-r--r--  1 root root 3243 Dec 23 15:40 myharbor.com.key</span><br><span class="line">-rw-r--r--  1 root root  261 Dec 23 15:41 v3.ext</span><br><span class="line"></span><br><span class="line"># 重启docker </span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure>

<h3 id="3-3-下载安装包"><a href="#3-3-下载安装包" class="headerlink" title="3.3 下载安装包"></a>3.3 下载安装包</h3><p>分为在线安装和离线两种， 都是一样的，按需选择。 这里我们直接选择在线安装，安装包小一点</p>
<p>下载<a target="_blank" rel="noopener" href="https://github.com/goharbor/harbor/releases">Releases · goharbor/harbor (github.com)</a></p>
<p>这里我选择最新版本，<code> harbor-online-installer-v2.4.1.tgz</code>  ，版本按需选择</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"># 解压 </span><br><span class="line">[root@k8s-node02 harbor]# tar -xvf  harbor-online-installer-v2.4.1.tgz</span><br><span class="line">[root@k8s-node02 harbor]# ll</span><br><span class="line">total 48</span><br><span class="line">-rw-r--r-- 1 root root 2029 Dec 23 15:37 ca.crt</span><br><span class="line">-rw-r--r-- 1 root root 3243 Dec 23 15:37 ca.key</span><br><span class="line">-rw-r--r-- 1 root root   17 Dec 23 15:41 ca.srl</span><br><span class="line">drwxr-xr-x 2 root root 4096 Dec 23 15:46 harbor</span><br><span class="line">-rw-r--r-- 1 root root 9844 Dec 23 15:45 harbor-online-installer-v2.4.1.tgz</span><br><span class="line">-rw-r--r-- 1 root root 2090 Dec 23 15:42 myharbor.com.cert</span><br><span class="line">-rw-r--r-- 1 root root 2090 Dec 23 15:41 myharbor.com.crt</span><br><span class="line">-rw-r--r-- 1 root root 1704 Dec 23 15:40 myharbor.com.csr</span><br><span class="line">-rw-r--r-- 1 root root 3243 Dec 23 15:40 myharbor.com.key</span><br><span class="line">-rw-r--r-- 1 root root  261 Dec 23 15:41 v3.ext</span><br><span class="line">[root@k8s-node02 harbor]# cd harbor/</span><br><span class="line">[root@k8s-node02 harbor]# ll</span><br><span class="line">total 36</span><br><span class="line">-rw-r--r-- 1 root root  3361 Dec 16 12:24 common.sh</span><br><span class="line">-rw-r--r-- 1 root root  8999 Dec 16 12:24 harbor.yml.tmpl</span><br><span class="line">-rwxr-xr-x 1 root root  2500 Dec 16 12:24 install.sh</span><br><span class="line">-rw-r--r-- 1 root root 11347 Dec 16 12:24 LICENSE</span><br><span class="line">-rwxr-xr-x 1 root root  1881 Dec 16 12:24 prepare</span><br></pre></td></tr></table></figure>



<h3 id="3-4-配置harbor-yml"><a href="#3-4-配置harbor-yml" class="headerlink" title="3.4 配置harbor.yml"></a>3.4 配置harbor.yml</h3><p>在harbor.yml中配置harbor,</p>
<p>这些参数在运行install.sh脚本安装或重新配置Harbor时生效。</p>
<p>在初始部署和启动Harbor之后，也可以在Harbor Web中执行额外的配置。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">cp  harbor.yml.tmpl  harbor.yml</span><br><span class="line">vim  harbor.yml</span><br><span class="line"># 至少要配置hostname 与 证书路径</span><br><span class="line">hostname: myharbor.com</span><br><span class="line"># https related config</span><br><span class="line">https:</span><br><span class="line">  # https port for harbor, default is 443</span><br><span class="line">  port: 443</span><br><span class="line">  # The path of cert and key files for nginx</span><br><span class="line">  certificate: /data/cert/myharbor.com.cert</span><br><span class="line">  private_key: /data/cert/myharbor.com.key</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 配置生效 </span><br><span class="line">./prepare</span><br><span class="line"># 部署</span><br><span class="line">./install.sh</span><br></pre></td></tr></table></figure>

<p>然后仓库就搭建好了，本地修改hosts就可以通过域名访问，或直接通过ip访问</p>
<p><img src="https://cdn.jsdelivr.net/gh/Yuanwanli1995/markdown_pic@main/blogpic/harbor.png"></p>
<p>参数如下，来自官网<a target="_blank" rel="noopener" href="https://goharbor.io/docs/2.4.0/install-config/configure-yml-file/">Harbor docs | Configure the Harbor YML File (goharbor.io)</a></p>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">子参数</th>
<th align="left">用法</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>hostname</code></td>
<td align="left">None</td>
<td align="left">指定要部署Harbor的目标主机的IP地址或完全限定域名(FQDN)。这是您访问harbor和注册服务的地址。例如，“192.168.1.10”或“reg.yourdomain.com”。注册表服务必须能够被外部客户端访问，所以不要指定’ localhost ‘、’ 127.0.0.1 ‘或’ 0.0.0.0 ‘作为主机名。</td>
</tr>
<tr>
<td align="left"><code>http</code></td>
<td align="left"></td>
<td align="left">不要在生产环境中使用HTTP。只有在没有连接到外部internet的测试或开发环境中，才可以接受使用HTTP。</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>port</code></td>
<td align="left">HTTP的端口号，海港门户和Docker命令。默认值是80。</td>
</tr>
<tr>
<td align="left"><code>https</code></td>
<td align="left"></td>
<td align="left">使用HTTPS访问海港门户和令牌/通知服务。在生产环境和没有气隙隔离的环境中始终使用HTTPS。</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>port</code></td>
<td align="left">使用HTTPS访问海港门户和令牌/通知服务。在生产环境和没有气隙隔离的环境中始终使用HTTPS。</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>certificate</code></td>
<td align="left">SSL证书的路径</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>private_key</code></td>
<td align="left">SSL密钥的路径。</td>
</tr>
<tr>
<td align="left"><code>internal_tls</code></td>
<td align="left"></td>
<td align="left">使用HTTPS在港口组件之间通信</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>enabled</code></td>
<td align="left">将该标志设置为“true”意味着启用了内部tls</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>dir</code></td>
<td align="left">包含内部证书和密钥的目录的路径</td>
</tr>
<tr>
<td align="left"><code>harbor_admin_password</code></td>
<td align="left">None</td>
<td align="left">设置Harbor系统管理员的初始密码。此密码仅在第一次启动Harbor时使用。在随后的登录中，将忽略此设置，并在Harbor Portal中设置管理员密码。默认用户名和密码为“admin”和“Harbor12345”。</td>
</tr>
<tr>
<td align="left"><code>database</code></td>
<td align="left"></td>
<td align="left">使用本地PostgreSQL数据库。您可以选择配置一个外部数据库，在这种情况下，您可以禁用这个选项。</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>password</code></td>
<td align="left">使用本地PostgreSQL数据库。您可以选择配置一个外部数据库，在这种情况下，您可以禁用这个选项。</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>max_idle_conns</code></td>
<td align="left">空闲连接池中的最大连接数。如果设置为&lt;=0，则不保留空闲连接。缺省值是50。如果不配置，则为2。</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>max_open_conns</code></td>
<td align="left">‘数据库的最大打开连接数。如果&lt;= 0，则没有打开连接的数量限制。对于到Harbor数据库的最大连接，默认值是100。如果不配置，则为0。</td>
</tr>
<tr>
<td align="left"><code>data_volume</code></td>
<td align="left">None</td>
<td align="left">**目标主机上存储Harbor数据的位置。即使在移除和/或重新创建Harbor的集装箱时，该数据也保持不变。您可以选择配置外部存储，在这种情况下禁用该选项并启用’ storage_service ‘。默认值是’ /data ‘。</td>
</tr>
<tr>
<td align="left"><code>trivy</code></td>
<td align="left"></td>
<td align="left">配置 Trivy 扫描.</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>ignore_unfixed</code></td>
<td align="left">将标志设置为“true”，只显示已修复的漏洞。默认值为“false”。</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>skip_update</code></td>
<td align="left">您可能希望在测试或CI/CD环境中启用此标志，以避免GitHub速率限制问题。如果启用了该标志，你必须手动下载“trivy-offline.tar.gz”存档文件，提取“trivy.db”和“元数据”。Json ‘文件，并将它们挂载到容器的’ /home/scanner/.cache/trivy/db/trivy.db ‘路径下。默认值为“false”。</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>insecure</code></td>
<td align="left">设置标志为true，跳过验证注册表证书。默认值为“false”。</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">`github_token</td>
<td align="left">‘设置GitHub访问令牌下载Trivy DB。Trivy DB由Trivy从GitHub发布页面下载。从GitHub匿名下载受每小时60次请求的限制。通常，这样的速率限制对于生产操作来说已经足够了。如果出于任何原因，这还不够，你可以通过指定GitHub访问令牌将速率限制到每小时5000个请求。有关GitHub速率限制的更多信息，请咨询<a target="_blank" rel="noopener" href="https://developer.github.com/v3/#rate-limiting%E3%80%82%E6%82%A8%E5%8F%AF%E4%BB%A5%E6%8C%89%E7%85%A7https://help.github.com/en/github/authen%E4%B8%AD%E7%9A%84%E8%AF%B4%E6%98%8E%E5%88%9B%E5%BB%BAGitHub%E4%BB%A4%E7%89%8C">https://developer.github.com/v3/#rate-limiting。您可以按照https://help.github.com/en/github/authen中的说明创建GitHub令牌</a></td>
</tr>
<tr>
<td align="left"><code>jobservice</code></td>
<td align="left"><code>max_job_workers</code></td>
<td align="left">作业服务中复制工作者的最大数量。对于每个映像复制作业，一个工作人员将存储库中的所有标记同步到远程目标。增加这个数量将允许系统中有更多的并发复制作业。但是，由于每个worker都会消耗一定数量的网络/CPU/IO资源，因此需要根据主机的硬件资源来设置该属性的值。默认值是10。</td>
</tr>
<tr>
<td align="left"><code>notification</code></td>
<td align="left"><code>webhook_job_max_retry</code></td>
<td align="left">设置web hook任务的最大重试次数。默认值是10。</td>
</tr>
<tr>
<td align="left"><code>chart</code></td>
<td align="left"><code>absolute_url</code></td>
<td align="left">设置为“启用”，以便Chart使用绝对URL。设置为’ disabled ‘以便Chart使用相对URL。</td>
</tr>
<tr>
<td align="left"><code>log</code></td>
<td align="left"></td>
<td align="left">配置日志记录。Harbor使用’ rsyslog ‘来收集每个容器的日志</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>level</code></td>
<td align="left">将日志级别设置为“debug”、“info”、“warning”、“error”或“fatal”。默认为’ info ‘。</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>local</code></td>
<td align="left">设置日志保留参数:’ rotate_count ‘:日志文件在被删除之前会旋转’ rotate_count ‘多次。如果count为0，则删除旧版本而不是旋转。默认值是50。’ rotate_size ‘:日志文件只有在增长大于’ rotate_size ‘字节时才会被旋转。k表示千字节，M表示兆字节，G表示千兆字节。‘100’、‘100k’、‘100M’和‘100G’都是有效值。默认为200M。’ location ‘:设置存储日志的目录。默认值是’ /var/log/harbor ‘。</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>external_endpoint</code></td>
<td align="left">启用此选项，将日志转发到syslog服务器。“protocol”:syslog服务器的传输协议。默认是TCP。’ host ‘: syslog服务器的URL。’ port ‘: syslog服务器监听的端口</td>
</tr>
<tr>
<td align="left"><code>proxy</code></td>
<td align="left"></td>
<td align="left"><em>：</em>配置代理以供普通适配器、复制jobservice和Harbor使用。如果不需要代理，请留空。一些代理服务器有白名单设置，如果Trivy是启用的，你需要添加以下url到代理服务器白名单:’ github-releases.githubusercontent.com ‘，和’ *.s3. amazonaws.com/ ‘。</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>http_proxy</code></td>
<td align="left">Configure an HTTP proxy, for example, <code>http://my.proxy.com:3128</code>.</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>https_proxy</code></td>
<td align="left">Configure an HTTPS proxy, for example, <code>http://my.proxy.com:3128</code>.</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>no_proxy</code></td>
<td align="left">Configure when not to use a proxy, for example, <code>127.0.0.1,localhost,core,registry</code>.</td>
</tr>
</tbody></table>
<h2 id="可选参数-Parameters"><a href="#可选参数-Parameters" class="headerlink" title="可选参数 Parameters"></a>可选参数 Parameters</h2><p>The following table lists the additional, optional parameters that you can set to configure your Harbor deployment beyond the minimum required settings. To enable a setting, you must uncomment it in <code>harbor.yml</code> by deleting the leading <code>#</code> character.</p>
<table>
<thead>
<tr>
<th align="left">Parameter</th>
<th align="left">Sub-Parameters</th>
<th align="left">Description and Additional Parameters</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>external_url</code></td>
<td align="left">None</td>
<td align="left">Enable this option to use an external proxy. When enabled, the hostname is no longer used.</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><code>storage_service</code></td>
<td align="left"></td>
<td align="left">By default, Harbor stores images and charts on your local filesystem. In a production environment, you might want to use another storage backend instead of the local filesystem. The parameters listed below are the configurations for the registry. See <em>Configuring Storage Backend</em> below for more information about how to configure a different backend.</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>ca_bundle</code></td>
<td align="left">The path to the custom root CA certificate, which is injected into the trust store of registry and chart repository containers. This is usually needed if internal storage uses a self signed certificate.</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>filesystem</code></td>
<td align="left">The default is <code>filesystem</code>, but you can set <code>azure</code>, <code>gcs</code>, <code>s3</code>, <code>swift</code> and <code>oss</code>. For information about how to configure other backends, see <a target="_blank" rel="noopener" href="https://goharbor.io/docs/2.4.0/install-config/configure-yml-file/#backend">Configuring a Storage Backend</a> below. Set <code>maxthreads</code> to limit the number of threads to the external provider. The default is 100.</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>redirect</code></td>
<td align="left">Set <code>disable</code> to <code>true</code> when you want to disable registry redirect</td>
</tr>
<tr>
<td align="left"><code>external_database</code></td>
<td align="left"></td>
<td align="left">Configure external database settings, if you disable the local database option. Currently, Harbor only supports PostgreSQL database. You must create three databases for Harbor core, Notary server, and Notary signer. The tables are generated automatically when Harbor starts up.</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>harbor</code></td>
<td align="left">Configure an external database for Harbor data.<code>host</code>: Hostname of the Harbor database.<code>port</code>: Database port.<code>db_name</code>: Database name.<code>username</code>: Username to connect to the core Harbor database.<code>password</code>: Password for the account you set in <code>username</code>.<code>ssl_mode</code>: Enable SSL mode.<code>max_idle_conns</code>: The maximum number of connections in the idle connection pool. If &lt;=0 no idle connections are retained. The default value is 2.<code>max_open_conns</code>: The maximum number of open connections to the database. If &lt;= 0 there is no limit on the number of open connections. The default value is 0.</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>notary_signer</code></td>
<td align="left">Configure an external database for the Notary signer database<code>host</code>: Hostname of the Notary signer database<code>port</code>: Database port.<code>db_name</code>: Database name.<code>username</code>: Username to connect to the Notary signer database.<code>password</code>: Password for the account you set in <code>username</code>.<code>ssl_mode</code>: Enable SSL mode.</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>notary_server</code></td>
<td align="left"><code>host</code>: Hostname of the Notary server database.<code>port</code>: Database port.<code>db_name</code>: Database name.<code>username</code>: Username to connect to the Notary server database.<code>password</code>: Password for the account you set in <code>username</code>.<code>ssl_mode</code>: Enable SSL mode.e</td>
</tr>
<tr>
<td align="left"><code>external_redis</code></td>
<td align="left"></td>
<td align="left">Configure an external Redis instance.</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>host</code></td>
<td align="left">redis_host:redis_port of the external Redis instance. If you are using Sentinel mode, this part should be host_sentinel1:port_sentinel1,host_sentinel2:port_sentinel2</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>sentinel_master_set</code></td>
<td align="left">Only set this when using Sentinel mode</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>password</code></td>
<td align="left">Password to connect to the external Redis instance.</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>registry_db_index</code></td>
<td align="left">Database index for Harbor registry.</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>jobservice_db_index</code></td>
<td align="left">Database index for jobservice.</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>chartmuseum_db_index</code></td>
<td align="left">Database index for Chart museum.</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>trivy_db_index</code></td>
<td align="left">Database index for Trivy adapter.</td>
</tr>
<tr>
<td align="left"><code>metric</code></td>
<td align="left"></td>
<td align="left">Configure exposing Harbor instance metrics to a specified port and path</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>enabled</code></td>
<td align="left">Enable exposing metrics on your Harbor instance by setting this to <code>true</code>. Default is <code>false</code></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>port</code></td>
<td align="left">Port metrics are exposed on. Default is <code>9090</code></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>path</code></td>
<td align="left">Path metrics are exposed on. Default is <code>/metrics</code></td>
</tr>
<tr>
<td align="left"><code>trace</code></td>
<td align="left"></td>
<td align="left">Configure exposing Distributed tracing data</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>enabled</code></td>
<td align="left">Enable exposing tracing on your Harbor instance by setting this to <code>true</code>. Default is <code>false</code></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>sample_rate</code></td>
<td align="left">Set the sample rate of tracing. For example, set sample_rate to <code>1</code> if you wanna sampling 100% of trace data; set <code>0.5</code> if you wanna sampling 50% of trace data, and so forth</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>namespace</code></td>
<td align="left">Namespace used to differenciate different harbor services, which will set to attribute with key <code>service.namespace</code></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>attributes</code></td>
<td align="left">The attributes is a key value dict contains user defined customized attributes used to initialize trace provider, and all of these atributes will added to trace data</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>jaeger</code></td>
<td align="left"><code>endpoint</code>: The url of endpoint(for example <code>http://127.0.0.1:14268/api/traces</code>). set endpoint means export to jaeger collector via http.<code>username:</code>: Username used to connect endpoint. Left empty if not needed.<code>password:</code>: Password used to connect endpoint. Left empty if not needed.<code>agent_host</code>: The host name of jaeger agent. Set agent_host means export data to jaeger agent via udp.<code>agent_port:</code>: The port name of jaeger agent.</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>otel</code></td>
<td align="left"><code>endpoint</code>: The hostname and port for otel compitable backend(for example <code>127.0.0.1:4318</code>).<code>url_path:</code>: The url path of endpoint(for example <code>127.0.0.1:4318</code>)<code>compression:</code>: If enabling data compression<code>insecure</code>: Ignore cert verification for otel backend<code>timeout:</code>: The timeout of data transfer</td>
</tr>
</tbody></table>
<h3 id="3-镜像推送"><a href="#3-镜像推送" class="headerlink" title="3 镜像推送"></a>3 镜像推送</h3><p>镜像推送也很方便，现在仓库web中新建账户zhangsan，再新建项mytest, 在项目中添加zhangsan. 就可以在项目-&gt;镜像仓库中看到推拉镜像的参考命令。十分的人性化。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Yuanwanli1995/markdown_pic@main/blogpic/harbor2.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 登陆到harbor </span><br><span class="line">[root@k8s-node02 harbor]# docker login myharbor.com</span><br><span class="line">Username: admin</span><br><span class="line">Password: </span><br><span class="line">WARNING! Your password will be stored unencrypted in /root/.docker/config.json.</span><br><span class="line">Configure a credential helper to remove this warning. See</span><br><span class="line">https://docs.docker.com/engine/reference/commandline/login/#credentials-store</span><br><span class="line">Login Succeeded</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#停止</span><br><span class="line">到harbor目录下</span><br><span class="line">docker-compose stop</span><br></pre></td></tr></table></figure>





<p>可能遇到的问题：</p>
<p> <code>because it doesn&#39;t contain any IP SANs</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker login https://172.21.39.225:21017</span><br><span class="line">Username: admin</span><br><span class="line">Password:</span><br><span class="line">Error response from daemon: Get &quot;https://172.21.39.225:21017/v2/&quot;: x509: cannot validate certificate for 172.21.39.225 because it doesn&#x27;t contain any IP SANs</span><br><span class="line"></span><br><span class="line">这是因为修改了默认端口， 需要新建 /etc/docker/certs.d/$hostname$port </span><br></pre></td></tr></table></figure>

<p><code>unknown authority</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Harbor docker login </span><br><span class="line">x509 certificate signed by unknown authority</span><br><span class="line">因为证书是自签的， 所以本地docker需要添加 insecurity </span><br><span class="line">cat &gt; /etc/docker/daemon.json &lt;&lt; EOF</span><br><span class="line">&#123;</span><br><span class="line">  &quot;insecure-registries&quot;: [&quot;0.0.0.0/0&quot;]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"> systemctl daemon-reload  systemctl restart docker</span><br><span class="line">或者&quot;insecure-registries&quot;: [&quot;172.21.39.225/0&quot;]</span><br><span class="line"># 可能添加失败,冲突了，</span><br><span class="line">vim /usr/lib/systemd/system/docker.service</span><br><span class="line">[Service]</span><br><span class="line">Type=notify</span><br><span class="line"># the default is not to use systemd for cgroups because the delegate issues still</span><br><span class="line"># exists and systemd currently does not support the cgroup feature set required</span><br><span class="line"># for containers run by docker</span><br><span class="line">ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock --insecure-registry &quot;0.0.0.0/0&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://yuanwanli1995.github.io/2022/03/19/django%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="yuanwanli">
      <meta itemprop="description" content="等不是办法，干才有出路">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="brisk">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/03/19/django%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">django学习笔记</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-03-19 18:50:15" itemprop="dateCreated datePublished" datetime="2022-03-19T18:50:15+08:00">2022-03-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>开始django</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># 安装特定版本的django </span><br><span class="line">pip install django==1.11.4 </span><br><span class="line"># 安装django会按照 django-admin命令行工具</span><br><span class="line"># 创建一个新的项目</span><br><span class="line">mkdir myproject </span><br><span class="line">cd myproject </span><br><span class="line">django-admin startproject myproject </span><br><span class="line"># 结构目录如下</span><br><span class="line">myproject/                  &lt;-- 高级别的文件夹</span><br><span class="line"> |-- myproject/             &lt;-- Django项目文件夹</span><br><span class="line"> |    |-- myproject/</span><br><span class="line"> |    |    |-- __init__.py</span><br><span class="line"> |    |    |-- settings.py</span><br><span class="line"> |    |    |-- urls.py</span><br><span class="line"> |    |    |-- wsgi.py</span><br><span class="line"> |    +-- manage.py</span><br></pre></td></tr></table></figure>

<p>最初的项目结构由五个文件组成：</p>
<ul>
<li><strong>manage.py</strong>：使用<strong>django-admin</strong>命令行工具的快捷方式。它用于运行与我们项目相关的管理命令。我们将使用它来运行开发服务器，运行测试，创建迁移等等。</li>
<li><strong>__init.py</strong>：这个空文件告诉python这个文件夹是一个python包。</li>
<li><strong>settings.py</strong>：这个文件包含了所有的项目配置。将来我们会一直提到这个文件！</li>
<li><strong>urls.py</strong>：这个文件负责映射我们项目中的路由和路径。例如，如果你想在访问URL <code>/ about/</code> 时显示某些内容，则必须先在这里做映射关系。</li>
<li><strong>wsgi.py</strong>：该文件是用于部署的简单网关接口。你可以暂且先不用关心她的内容，就先让他在那里就好了。</li>
</ul>
<p>django自带了一个简单的网络服务器。在开发过程中非常方便，所以我们无需安装任何其他软件即可在本地运行项目。我们可以通过执行命令来测试一下它：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py runserver </span><br></pre></td></tr></table></figure>

<p>访问web, <a href="http://localhost:8000即可看到。">http://localhost:8000即可看到。</a></p>
<p>在Django的哲学中，我们有两个重要的概念：</p>
<ul>
<li><strong>app</strong>：是一个可以做完成某件事情的Web应用程序。一个应用程序通常由一组<strong>models(数据库表)<strong>，</strong>views(视图)<strong>，</strong>templates(模板)<strong>，</strong>tests(测试)</strong> 组成。</li>
<li><strong>project</strong>：是配置和应用程序的集合。一个项目可以由多个应用程序或一个应用程序组成。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 在项目中新建一个应用</span><br><span class="line">django-admin startapp boards</span><br></pre></td></tr></table></figure>

<p>如何新建一个视图？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 在views中新建一个header page+response </span><br><span class="line">def home(request):</span><br><span class="line">    return HttpResponse(&quot;hello world&quot;)</span><br><span class="line"># 在urls中新建一个路由匹配规则， 正则</span><br><span class="line">from boards import views </span><br><span class="line">urlpatterns = [</span><br><span class="line">    url(r&#x27;^$&#x27;, views.home, name=&#x27;home&#x27;),</span><br><span class="line">]</span><br><span class="line"># ^$开始到结束，匹配空路径 </span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://yuanwanli1995.github.io/2022/03/19/2021-12-06-node.js-linux%E5%AE%89%E8%A3%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="yuanwanli">
      <meta itemprop="description" content="等不是办法，干才有出路">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="brisk">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/03/19/2021-12-06-node.js-linux%E5%AE%89%E8%A3%85/" class="post-title-link" itemprop="url">node.js linux安装</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-03-19 18:50:15" itemprop="dateCreated datePublished" datetime="2022-03-19T18:50:15+08:00">2022-03-19</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h4 id="node-js-linux安装"><a href="#node-js-linux安装" class="headerlink" title="node.js linux安装"></a>node.js linux安装</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># 新建文件夹</span><br><span class="line">mkdir nodejs</span><br><span class="line">cd nodejs/</span><br><span class="line"># 下载官方编译好的node.js下载</span><br><span class="line">wget https://nodejs.org/dist/v12.14.0/node-v12.14.0-linux-x64.tar.xz</span><br><span class="line"># 解压</span><br><span class="line">xz -d node-v12.14.0-linux-x64.tar.xz </span><br><span class="line">tar -xf node-v12.14.0-linux-x64.tar </span><br><span class="line"># 移动文件夹</span><br><span class="line">mv node-v12.14.0-linux-x64/* /usr/local/nodejs/</span><br><span class="line"># 软链接</span><br><span class="line">ln -s /usr/local/nodejs/bin/node /usr/local/bin</span><br><span class="line">ln -s /usr/local/nodejs/bin/npm /usr/local/bin</span><br><span class="line"># 测试</span><br><span class="line">[root@monitor01 nodejs]# node -v </span><br><span class="line">v12.14.0</span><br></pre></td></tr></table></figure>

<p>记录备查</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://yuanwanli1995.github.io/2022/03/19/2021-12-03-%E9%83%A8%E7%BD%B2zabbix/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="yuanwanli">
      <meta itemprop="description" content="等不是办法，干才有出路">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="brisk">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/03/19/2021-12-03-%E9%83%A8%E7%BD%B2zabbix/" class="post-title-link" itemprop="url">部署zabbix</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-03-19 18:50:15" itemprop="dateCreated datePublished" datetime="2022-03-19T18:50:15+08:00">2022-03-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%BC%96%E7%A8%8B%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">编程笔记</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Zabbix是当前主流开源的企业级分布式监控系统。Zabbix特点是：安装部署较简单，且默认自带了多种监控告警模板。也具备较强的仪表盘展示功能；提供API接口，支持脚本调用；支持自定义编写插件以及监控模板。 </p>
<p>这里记一下zabbix部署方法。 主要是以下几步。 </p>
<ol>
<li> 环境配置</li>
<li> yum安装 </li>
<li>mariadb配置zabbix表结构数据 </li>
<li> 配置zabbix  </li>
<li> 登陆zabbix web </li>
</ol>
<h3 id="1-基础配置"><a href="#1-基础配置" class="headerlink" title="1 基础配置"></a>1 基础配置</h3><p>确保zabbix可用， 测试的时候最好关闭firewalld、selinux  </p>
<h3 id="2-安装"><a href="#2-安装" class="headerlink" title="2 安装"></a>2 安装</h3><p>yum安装也很方便，只是先要添加yum源。 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm -Uvh https://repo.zabbix.com/zabbix/4.4/rhel/7/x86_64/zabbix-release-4.4-1.el7.noarch.rpm </span><br><span class="line">yum install epel-release </span><br></pre></td></tr></table></figure>

<blockquote>
<p>EPEL是由 Fedora 社区打造，为 RHEL 及衍生发行版如 CentOS、Scientific Linux 等提供高质量软件包的项目。装上了 EPEL之后，就相当于添加了一个第三方源。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install zabbix-* </span><br></pre></td></tr></table></figure>

<h3 id="3-数据库中导入zabbix表结构数据"><a href="#3-数据库中导入zabbix表结构数据" class="headerlink" title="3 数据库中导入zabbix表结构数据"></a>3 数据库中导入zabbix表结构数据</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 安装zabbix  </span><br><span class="line">yum -y install mariadb-* </span><br><span class="line"># 开机自启动给</span><br><span class="line">systemctl enable mariadb</span><br><span class="line"># 启动mariadb </span><br><span class="line">systemctl start mariadb  </span><br></pre></td></tr></table></figure>

<p>mariadb启动之后， 进入数据库，mariadb和mysql用法一样 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root </span><br></pre></td></tr></table></figure>

<p>配置 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create database zabbix character set utf8 collate utf8_bin;</span><br><span class="line">grant all privileges on zabbix.* to &#x27;zabbix&#x27;@&#x27;localhost&#x27; identified by &#x27;zabbix@123&#x27;;</span><br><span class="line">flush privileges;</span><br><span class="line">quit; </span><br></pre></td></tr></table></figure>

<blockquote>
<p>sql需要冒号结尾</p>
</blockquote>
<p>导入数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zcat /usr/share/doc/zabbix-server-mysql-*/create.sql.gz |mysql -uzabbix -p&#x27;zabbix@123&#x27; -b zabbix </span><br></pre></td></tr></table></figure>

<p>4 修改zabbix_server.conf配置 </p>
<p>先保存一份默认配置备用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp /etc/zabbix/zabbix_server.conf /etc/zabbix/zabbix_server.conf.source</span><br></pre></td></tr></table></figure>

<p>修改配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; /etc/zabbix/zabbix_server.conf &lt;&lt; EOF</span><br><span class="line">LogFile=/var/log/zabbix/zabbix_server.log</span><br><span class="line">LogFileSize=0</span><br><span class="line">DebugLevel=3</span><br><span class="line">PidFile=/var/run/zabbix/zabbix_server.pid</span><br><span class="line">SocketDir=/var/run/zabbix</span><br><span class="line">DBName=zabbix</span><br><span class="line">DBUser=zabbix</span><br><span class="line">DBPassword=zabbix@123</span><br><span class="line">StartPollers=16</span><br><span class="line">StartPollersUnreachable=4</span><br><span class="line">StartTrappers=10</span><br><span class="line">StartPingers=8</span><br><span class="line">SNMPTrapperFile=/var/log/snmptrap/snmptrap.log</span><br><span class="line">CacheSize=1024M</span><br><span class="line">StartDBSyncers=8</span><br><span class="line">HistoryCacheSize=1024M</span><br><span class="line">HistoryIndexCacheSize=256M</span><br><span class="line">TrendCacheSize=1024M</span><br><span class="line">Timeout=4</span><br><span class="line">AlertScriptsPath=/usr/lib/zabbix/alertscripts</span><br><span class="line">ExternalScripts=/usr/lib/zabbix/externalscripts</span><br><span class="line">LogSlowQueries=3000</span><br><span class="line">StatsAllowedIP=127.0.0.1 </span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<p>启动</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># systemctl enable zabbix-server</span><br><span class="line"># systemctl start zabbix-server </span><br></pre></td></tr></table></figure>

<p>配置nginx </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/nginx/conf.d/zabbix.conf  </span><br><span class="line"># 修改端口 和 server_name ,取消注释</span><br><span class="line">listen          8080;</span><br><span class="line">server_name     monitor.com; </span><br><span class="line"></span><br><span class="line"># 修改时区</span><br><span class="line">echo &quot;php_value[date.timezone] = Asia/Shanghai&quot; &gt;&gt;  /etc/php-fpm.d/zabbix.conf </span><br></pre></td></tr></table></figure>

<p>启动 php-fpm和nginx </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable php-fpm</span><br><span class="line">systemctl restart php-fpm</span><br><span class="line"></span><br><span class="line">systemctl enable nginx</span><br><span class="line">systemctl start nginx </span><br></pre></td></tr></table></figure>

<h3 id="访问登陆"><a href="#访问登陆" class="headerlink" title="访问登陆"></a>访问登陆</h3><p>最后访问 <a target="_blank" rel="noopener" href="http://ip:8080/">http://ip:8080</a> </p>
<p>按照提示登陆即可。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Yuanwanli1995/markdown_pic@main/blogpic/zabbix.png"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://yuanwanli1995.github.io/2022/03/19/2022-03-19-hexo-bug/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="yuanwanli">
      <meta itemprop="description" content="等不是办法，干才有出路">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="brisk">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/03/19/2022-03-19-hexo-bug/" class="post-title-link" itemprop="url">hexo bug</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-03-19 00:00:00 / 修改时间：18:57:50" itemprop="dateCreated datePublished" datetime="2022-03-19T00:00:00+08:00">2022-03-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/bug/" itemprop="url" rel="index"><span itemprop="name">bug</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>error: </p>
<p>kex_exchange_identification: read: Connection reset by peer<br>Connection reset by 20.205.243.166 port 22<br>fatal: Could not read from remote repository.</p>
<p>Please make sure you have the correct access rights<br>and the repository exists.<br>FATAL {<br>  err: Error: Spawn failed<br>      at ChildProcess.<anonymous> (/root/containerfile/Hexo/node_modules/hexo-util/lib/spawn.js:51:21)<br>      at ChildProcess.emit (events.js:210:5)<br>      at Process.ChildProcess._handle.onexit (internal/child_process.js:272:12) {<br>    code: 128<br>  }<br>} Something’s wrong. Maybe you can find the solution here: %s <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">https://hexo.io/docs/troubleshooting.html</a></p>
<p>更新密钥不行</p>
<p>重启容器可以了，未知原因</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://yuanwanli1995.github.io/2022/03/19/2022-03-19-docker-build-bug/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="yuanwanli">
      <meta itemprop="description" content="等不是办法，干才有出路">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="brisk">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/03/19/2022-03-19-docker-build-bug/" class="post-title-link" itemprop="url">docker build bug</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-03-19 00:00:00" itemprop="dateCreated datePublished" datetime="2022-03-19T00:00:00+08:00">2022-03-19</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2022-03-21 09:42:57" itemprop="dateModified" datetime="2022-03-21T09:42:57+08:00">2022-03-21</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/bug/" itemprop="url" rel="index"><span itemprop="name">bug</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>docker build </p>
<p>entrypoint 与 cmd  运行脚本失败， 是因为 容器必须要有镜像前台运行， 不能后台运行，否则容器会关闭</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://yuanwanli1995.github.io/2022/03/18/2022-03-18-rke-up-bug/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="yuanwanli">
      <meta itemprop="description" content="等不是办法，干才有出路">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="brisk">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/03/18/2022-03-18-rke-up-bug/" class="post-title-link" itemprop="url">rke up bug</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-03-18 00:00:00" itemprop="dateCreated datePublished" datetime="2022-03-18T00:00:00+08:00">2022-03-18</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2022-03-21 09:42:57" itemprop="dateModified" datetime="2022-03-21T09:42:57+08:00">2022-03-21</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/bug/" itemprop="url" rel="index"><span itemprop="name">bug</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><code>Failed to reconcile etcd plane: Etcd plane nodes are replaced. Stopping provisioning. Please restore your cluster from backup.</code></p>
<p>因为没有清除干净，rke remove或者删除cluster.rkestate创建后遗留的文件。</p>
<p><code>kubernetes_version</code>字段无效</p>
<p>更新集群版本时，只指定kubernetes version无效，需要再指定</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">images:</span><br><span class="line">kubernetes: </span><br></pre></td></tr></table></figure>





<p><code>Unable to connect to the server: x509: certificate signed by unknown authority (possibly because of &quot;crypto/rsa: verification error&quot; while trying to verify candidate authority certificate &quot;kube-ca&quot;)</code></p>
<p>这是因为rke更新了， kubectl认证的文件没有更新</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp kubeconfig---  /root/.kube/config</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://yuanwanli1995.github.io/2022/03/13/2022-03-13-%E9%A1%B9%E7%9B%AE%E7%AB%8B%E9%A1%B9%E7%AE%A1%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="yuanwanli">
      <meta itemprop="description" content="等不是办法，干才有出路">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="brisk">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/03/13/2022-03-13-%E9%A1%B9%E7%9B%AE%E7%AB%8B%E9%A1%B9%E7%AE%A1%E7%90%86/" class="post-title-link" itemprop="url">项目立项管理</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-03-13 00:00:00" itemprop="dateCreated datePublished" datetime="2022-03-13T00:00:00+08:00">2022-03-13</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2022-03-19 18:50:15" itemprop="dateModified" datetime="2022-03-19T18:50:15+08:00">2022-03-19</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%BD%AF%E8%80%83/" itemprop="url" rel="index"><span itemprop="name">软考</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="三-项目立项管理"><a href="#三-项目立项管理" class="headerlink" title="三 项目立项管理"></a>三 项目立项管理</h3><h4 id="3-1-项目管理内容"><a href="#3-1-项目管理内容" class="headerlink" title="3.1 项目管理内容"></a>3.1 项目管理内容</h4><h5 id="3-1-1-立项建议书"><a href="#3-1-1-立项建议书" class="headerlink" title="3.1.1 立项建议书"></a>3.1.1 立项建议书</h5><h5 id="3-1-2-项目可行性研究报告"><a href="#3-1-2-项目可行性研究报告" class="headerlink" title="3.1.2 项目可行性研究报告"></a>3.1.2 项目可行性研究报告</h5><h5 id="3-1-3-项目招投标"><a href="#3-1-3-项目招投标" class="headerlink" title="3.1.3 项目招投标"></a>3.1.3 项目招投标</h5><ol>
<li>招标</li>
<li>投标</li>
<li>评标</li>
<li>选定项目承建方</li>
</ol>
<h4 id="3-2-可行性研究"><a href="#3-2-可行性研究" class="headerlink" title="3.2 可行性研究"></a>3.2 可行性研究</h4><h5 id="3-2-1-可行性研究的内容"><a href="#3-2-1-可行性研究的内容" class="headerlink" title="3.2.1 可行性研究的内容"></a>3.2.1 可行性研究的内容</h5><ol>
<li>技术可行性分析</li>
<li>经济可行性分析</li>
<li>运行环境可行性分析</li>
<li>其他方面的可行性分析 </li>
</ol>
<h5 id="3-2-2-可行性研究的步骤"><a href="#3-2-2-可行性研究的步骤" class="headerlink" title="3.2.2 可行性研究的步骤"></a>3.2.2 可行性研究的步骤</h5><h5 id="3-2-3-初步可行性研究"><a href="#3-2-3-初步可行性研究" class="headerlink" title="3.2.3 初步可行性研究"></a>3.2.3 初步可行性研究</h5><ol>
<li>初步可行性研究的定义及目的 </li>
<li>初步可行性研究的主要内容</li>
<li>初步可行性研究的结果及作用 </li>
<li>辅助功能研究</li>
</ol>
<h5 id="3-2-4-详细可行性研究"><a href="#3-2-4-详细可行性研究" class="headerlink" title="3.2.4 详细可行性研究"></a>3.2.4 详细可行性研究</h5><ol>
<li>详细可行性研究的依据</li>
<li>详细可行性研究的原则于程序框架</li>
<li>详细可行性研究的方法</li>
<li>详细可行性研究的内容</li>
</ol>
<h5 id="3-2-5-效益的预测与评估"><a href="#3-2-5-效益的预测与评估" class="headerlink" title="3.2.5 效益的预测与评估"></a>3.2.5 效益的预测与评估</h5><ol>
<li>函数求解法</li>
<li>相关关系法</li>
<li>模糊数学法</li>
<li>专家意见法</li>
<li>成本降低法</li>
<li>利润增加法</li>
</ol>
<h4 id="3-3-项目的评估与论证"><a href="#3-3-项目的评估与论证" class="headerlink" title="3.3 项目的评估与论证"></a>3.3 项目的评估与论证</h4><h5 id="3-3-1-项目论证"><a href="#3-3-1-项目论证" class="headerlink" title="3.3.1 项目论证"></a>3.3.1 项目论证</h5><ol>
<li>项目论证的概念</li>
<li>项目论证的作用</li>
<li>项目论证的阶段划分</li>
<li>项目论证的一半程序</li>
</ol>
<h5 id="3-3-2-项目评估"><a href="#3-3-2-项目评估" class="headerlink" title="3.3.2 项目评估"></a>3.3.2 项目评估</h5><ol>
<li> 项目评估的含义及其依据 </li>
<li>项目评估的程序</li>
<li>项目评估的内容</li>
<li>项目评估报告内容大纲</li>
</ol>
<h3 id="四-项目整体管理"><a href="#四-项目整体管理" class="headerlink" title="四 项目整体管理"></a>四 项目整体管理</h3><h4 id="4-1-项目整体管理综述"><a href="#4-1-项目整体管理综述" class="headerlink" title="4.1 项目整体管理综述"></a>4.1 项目整体管理综述</h4><h4 id="4-2-制定项目章程"><a href="#4-2-制定项目章程" class="headerlink" title="4.2 制定项目章程"></a>4.2 制定项目章程</h4><h5 id="4-2-1-制定项目章程的过程"><a href="#4-2-1-制定项目章程的过程" class="headerlink" title="4.2.1 制定项目章程的过程"></a>4.2.1 制定项目章程的过程</h5><h5 id="4-2-2-制定项目章程的依据"><a href="#4-2-2-制定项目章程的依据" class="headerlink" title="4.2.2 制定项目章程的依据"></a>4.2.2 制定项目章程的依据</h5><ol>
<li>协议</li>
<li>项目工作说明书</li>
<li>商业论证</li>
<li>事业环境因素</li>
<li>组织生产过程</li>
</ol>
<h5 id="4-2-3-专家判断"><a href="#4-2-3-专家判断" class="headerlink" title="4.2.3 专家判断"></a>4.2.3 专家判断</h5><h5 id="4-2-4-项目选择方法"><a href="#4-2-4-项目选择方法" class="headerlink" title="4.2.4 项目选择方法"></a>4.2.4 项目选择方法</h5><ol>
<li>净现值分析</li>
<li>投资收益率分析</li>
<li>投资回收期分析</li>
</ol>
<h5 id="4-2-5-项目启动会议"><a href="#4-2-5-项目启动会议" class="headerlink" title="4.2.5 项目启动会议"></a>4.2.5 项目启动会议</h5><ol>
<li>确定会议目标</li>
<li>做好会前准备工作</li>
<li>明确并通知参加会议的人员</li>
<li>明确会议的主要议题</li>
<li>做好记录</li>
</ol>
<h5 id="4-2-6-项目目标"><a href="#4-2-6-项目目标" class="headerlink" title="4.2.6 项目目标"></a>4.2.6 项目目标</h5><ol>
<li>成果指标</li>
<li>制约条件指标</li>
</ol>
<h5 id="4-2-7-引导技术"><a href="#4-2-7-引导技术" class="headerlink" title="4.2.7 引导技术"></a>4.2.7 引导技术</h5><h4 id="4-3-制定项目管理计划"><a href="#4-3-制定项目管理计划" class="headerlink" title="4.3 制定项目管理计划"></a>4.3 制定项目管理计划</h4><h5 id="4-3-1-项目管理计划"><a href="#4-3-1-项目管理计划" class="headerlink" title="4.3.1 项目管理计划"></a>4.3.1 项目管理计划</h5><h5 id="4-3-2-制定项目管理计划的过程"><a href="#4-3-2-制定项目管理计划的过程" class="headerlink" title="4.3.2 制定项目管理计划的过程"></a>4.3.2 制定项目管理计划的过程</h5><h5 id="4-3-3-项目管理信息系统"><a href="#4-3-3-项目管理信息系统" class="headerlink" title="4.3.3 项目管理信息系统"></a>4.3.3 项目管理信息系统</h5><ol>
<li>配置管理系统</li>
<li>变更控制系统</li>
</ol>
<h4 id="4-4-指导与管理项目执行"><a href="#4-4-指导与管理项目执行" class="headerlink" title="4.4 指导与管理项目执行"></a>4.4 指导与管理项目执行</h4><h5 id="4-4-1-指导与管理项目的执行的依据"><a href="#4-4-1-指导与管理项目的执行的依据" class="headerlink" title="4.4.1 指导与管理项目的执行的依据"></a>4.4.1 指导与管理项目的执行的依据</h5><ol>
<li>项目管理计划</li>
<li>批准的变更请求</li>
<li>事业环境因素</li>
<li>组织过程资产</li>
</ol>
<h5 id="4-4-2-指导与管理项目执行的工具与技术"><a href="#4-4-2-指导与管理项目执行的工具与技术" class="headerlink" title="4.4.2 指导与管理项目执行的工具与技术"></a>4.4.2 指导与管理项目执行的工具与技术</h5><ol>
<li>专家判断</li>
<li>项目管理信息系统</li>
<li>会议</li>
</ol>
<h5 id="4-4-3-指导与管理项目执行的成果"><a href="#4-4-3-指导与管理项目执行的成果" class="headerlink" title="4.4.3 指导与管理项目执行的成果"></a>4.4.3 指导与管理项目执行的成果</h5><ol>
<li>可交付的成果</li>
<li>工作绩效数据</li>
<li>变更请求</li>
<li>项目管理计划的更新</li>
<li>项目文件更新</li>
</ol>
<h4 id="4-5-监控项目工作"><a href="#4-5-监控项目工作" class="headerlink" title="4.5 监控项目工作"></a>4.5 监控项目工作</h4><h5 id="4-5-1-监控项目工作的依据"><a href="#4-5-1-监控项目工作的依据" class="headerlink" title="4.5.1 监控项目工作的依据"></a>4.5.1 监控项目工作的依据</h5><ol>
<li>项目管理计划</li>
<li>进度预测</li>
<li>成本预测</li>
<li>确认的变更</li>
<li>工作绩效信息</li>
<li>事业环境因素</li>
<li>组织过程资产</li>
</ol>
<h5 id="4-5-2-监控项目工作的工具与技术"><a href="#4-5-2-监控项目工作的工具与技术" class="headerlink" title="4.5.2 监控项目工作的工具与技术"></a>4.5.2 监控项目工作的工具与技术</h5><ol>
<li>专家判断</li>
<li>分析技术</li>
<li>项目管理信息系统</li>
<li>会议</li>
</ol>
<h5 id="4-5-3-监控项目工作的成果"><a href="#4-5-3-监控项目工作的成果" class="headerlink" title="4.5.3 监控项目工作的成果"></a>4.5.3 监控项目工作的成果</h5><ol>
<li>变更请求</li>
<li>工作绩效报告</li>
<li>项目管理计划更新</li>
<li>项目文件更新</li>
</ol>
<h4 id="4-6-实施整体变更控制"><a href="#4-6-实施整体变更控制" class="headerlink" title="4.6 实施整体变更控制"></a>4.6 实施整体变更控制</h4><h5 id="4-6-1-整体变更控制的依据"><a href="#4-6-1-整体变更控制的依据" class="headerlink" title="4.6.1 整体变更控制的依据"></a>4.6.1 整体变更控制的依据</h5><ol>
<li>项目管理计划 </li>
<li>工作绩效报告</li>
<li>变更请求</li>
<li>事业环境因素</li>
<li>组织生产过程 </li>
</ol>
<h5 id="4-6-2-整体变更控制的工具的与技术"><a href="#4-6-2-整体变更控制的工具的与技术" class="headerlink" title="4.6.2 整体变更控制的工具的与技术"></a>4.6.2 整体变更控制的工具的与技术</h5><ol>
<li>专家判断</li>
<li>会议</li>
<li>变更控制工具</li>
</ol>
<h5 id="4-6-3-整体变更控制的成果"><a href="#4-6-3-整体变更控制的成果" class="headerlink" title="4.6.3 整体变更控制的成果"></a>4.6.3 整体变更控制的成果</h5><ol>
<li>批准的变更请求</li>
<li>变更日志</li>
<li>项目管理计划更新</li>
<li>项目文件更新</li>
</ol>
<h4 id="4-7-结束项目或阶段"><a href="#4-7-结束项目或阶段" class="headerlink" title="4.7 结束项目或阶段"></a>4.7 结束项目或阶段</h4><h5 id="4-7-1-结束项目或阶段的依据"><a href="#4-7-1-结束项目或阶段的依据" class="headerlink" title="4.7.1 结束项目或阶段的依据"></a>4.7.1 结束项目或阶段的依据</h5><ol>
<li>项目管理计划</li>
<li>验收的可交付成果</li>
<li>组织过程资产</li>
</ol>
<h5 id="4-7-2-结束项目或阶段的工具与技术"><a href="#4-7-2-结束项目或阶段的工具与技术" class="headerlink" title="4.7.2 结束项目或阶段的工具与技术"></a>4.7.2 结束项目或阶段的工具与技术</h5><ol>
<li> 专家判断</li>
<li>分析技术</li>
<li>会议</li>
</ol>
<h5 id="4-7-3-结束项目或阶段的成果"><a href="#4-7-3-结束项目或阶段的成果" class="headerlink" title="4.7.3 结束项目或阶段的成果"></a>4.7.3 结束项目或阶段的成果</h5><ol>
<li>最终产品、服务或成果移交</li>
<li>组织过程资产更新</li>
</ol>
<h3 id="五-项目范围管理"><a href="#五-项目范围管理" class="headerlink" title="五 项目范围管理"></a>五 项目范围管理</h3><p>5.1 范围管理概述</p>
<p>5.1.1 产品范围与项目范围</p>
<p>5.1.2 范围管理的重要性</p>
<p>5.1.3 范围管理的过程</p>
<ol>
<li>规划范围管理</li>
<li>收集需求</li>
<li>定义范围</li>
<li>创建WBS(Work Breakdown Structure)</li>
<li>确认范围</li>
<li>控制范围</li>
</ol>
<p>5.2 规范范围管理</p>
<p>5.2.1 范围管理计划</p>
<p>5.2.2 需求管理计划</p>
<p>5.3 收集需求</p>
<p>5.3.1 需求的分类</p>
<p>5.3.2 收集需求的工具与技术</p>
<ol>
<li>访谈</li>
<li>焦点小组</li>
<li>引导式研讨会</li>
<li>群体创新技术<ol>
<li>头脑风暴</li>
<li>名义小组技术</li>
<li>德尔菲技术</li>
<li>概念/思维导图 </li>
<li>亲和图</li>
<li>多标准决策分析</li>
</ol>
</li>
<li>群体决策技术</li>
<li>问卷调查</li>
<li>观察</li>
<li>原型法</li>
<li>标杆对照</li>
<li>系统交互图</li>
<li>文件分析</li>
</ol>
<p>5.3.3 需求文件</p>
<p>5.3.4 需求跟踪</p>
<ol>
<li>需求跟踪的内容 </li>
<li>需求跟踪矩阵</li>
</ol>
<p>5.4 定义范围</p>
<p>5.4.1 定义范围的工具与技术</p>
<ol>
<li>产品分析</li>
<li>备选方案生成</li>
</ol>
<p>5.4.2 项目范围说明书</p>
<ol>
<li>范围说明书的内容</li>
<li>范围说明书的作用</li>
</ol>
<p>5.5 创建工作分解结构</p>
<p>5.5.1 WBS的层次</p>
<ol>
<li>历程碑</li>
<li>工作包</li>
<li>控制账户</li>
<li>规划包</li>
<li>WBS词典</li>
</ol>
<p>5.5.2 分解</p>
<ol>
<li>分解的原则</li>
<li>工作过程</li>
<li>注意事项</li>
</ol>
<p>5.5.3 WBS的作用</p>
<p>5.6 确认范围</p>
<p>5.6.1 确认范围的概述</p>
<ol>
<li>确认范围的步骤</li>
<li>需要检查的问题</li>
</ol>
<p>5.6.2 干系人关注点</p>
<p>5.6.3 几个术语的比较</p>
<ol>
<li>确认范围与核实产品</li>
<li>确认范围与质量控制</li>
<li>确认范围与项目收尾</li>
</ol>
<p>5.7 控制范围</p>
<ol>
<li>范围变更的原因</li>
<li>范围变更控制的工作</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://yuanwanli1995.github.io/2022/02/27/2022-02-27-pip-install-bug/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="yuanwanli">
      <meta itemprop="description" content="等不是办法，干才有出路">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="brisk">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/02/27/2022-02-27-pip-install-bug/" class="post-title-link" itemprop="url">pip install bug</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-02-27 00:00:00" itemprop="dateCreated datePublished" datetime="2022-02-27T00:00:00+08:00">2022-02-27</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2022-03-29 10:17:00" itemprop="dateModified" datetime="2022-03-29T10:17:00+08:00">2022-03-29</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%BC%96%E7%A8%8B%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">编程笔记</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>error: Microsoft Visual C++ 14.0 is required. Get it with “Build Tools for Visual Studio”: <a target="_blank" rel="noopener" href="https://visualstudio.microsoft.com/downloads/">https://visualstudio.microsoft.com/downloads/</a> </p>
<p>python版本问题， pip3.7不行， 换成pip3.6可以</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">yuanwanli</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="/js/third-party/search/local-search.js"></script>




  





</body>
</html>
